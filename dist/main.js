(()=>{"use strict";const e=({title:t,desc:n,notes:s,dueDate:c,priority:a,checkList:d,resolved:i})=>({title:t,desc:n,notes:s,dueDate:c,priority:a,checkList:d,resolved:i,copy:()=>{const c=d.map((e=>[e[0],e[1]]));return e({title:t,desc:n,notes:s,dueDate:"bad for now",priority:a,checkList:c,resolved:i})}}),t=(t,n)=>({name:t,taskList:n,addTask:()=>{const t=e({title:"New Task",desc:"A blank task",notes:"blank notes",dueDate:"set this somehow",priority:"none",checkList:[["sample checkbox",!1]],resolved:!1});n.push(t)},deleteTask:e=>{for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}}});let n;const s="Odin-Todo",c=()=>{localStorage.setItem(s,JSON.stringify(n))},a=()=>{const e=t("New Project",[]);e.addTask(),n.push(e),c()},d=(e,t)=>({elem:e,label:t,setValue:t=>{e.setAttribute("value",t)},getValue:()=>e.value}),i=(e,t)=>{e.innerHTML="";const n=document.createElement("div");n.setAttribute("id","project-info"),e.appendChild(n);const s=document.createElement("button");s.innerText="Back to Home",s.classList.add("back-button"),n.appendChild(s),s.addEventListener("click",(()=>{m(e)}));const a=document.createElement("h1");a.innerText=t.name,n.appendChild(a);const d=document.createElement("button");d.innerText="Rename Project",d.classList.add("project-rename"),n.appendChild(d),d.addEventListener("click",(()=>{const e=prompt("New project name?");e&&(t.name=e,a.innerText=e,c())}));const l=document.createElement("button");l.innerText="Create New Task",l.classList.add("create-button"),e.appendChild(l),l.addEventListener("click",(()=>{t.addTask(),c(),i(e,t)}));const r=document.createElement("ul");r.setAttribute("id","task-list"),e.appendChild(r);const p=t.taskList,u={content:e,project:t};p.forEach((e=>{const t=document.createElement("li");r.appendChild(t),o(e,t,u)})),e.appendChild(r)},o=(e,t,n)=>{const s=l(e,t),c=document.createElement("button");return c.classList.add("mini-task-expand"),c.innerText=">",s.append(c),c.addEventListener("click",(()=>{t.innerHTML="",r(e,t,n)})),s},l=(e,t,n)=>{const s=document.createElement("div");s.classList.add("mini-task"),t.append(s);const c=document.createElement("div");c.classList.add("mini-task-title"),c.innerText=e.title,s.append(c);const a=document.createElement("div");return a.classList.add("mini-task-date"),a.innerText=e.dueDate,s.append(a),e.resolved?s.classList.add(p("none")):s.classList.add(p(e.priority)),s},r=(e,t,n)=>{const s=document.createElement("div");s.classList.add("full-task"),t.append(s);const a=l(e,s),p=document.createElement("button");p.classList.add("mini-task-expand"),p.innerText="^",a.append(p),p.addEventListener("click",(()=>{t.innerHTML="",o(e,t)}));const m=document.createElement("div");m.classList.add("full-task-details"),t.append(m);const u=document.createElement("div");u.classList.add("full-task-text"),u.innerText=e.desc,m.append(u);const k=document.createElement("div");k.classList.add("full-task-text"),k.innerText=e.notes,m.append(k);const E=document.createElement("div");E.classList.add("full-task-text"),e.resolved?E.innerText="Priority: none (resolved)":E.innerText=`Priority: ${e.priority}`,m.append(E);const L=document.createElement("ul");L.classList.add("full-task-list"),m.append(L),e.checkList.forEach((e=>{const t=document.createElement("li");t.classList.add("full-task-list-item"),L.append(t);const n=document.createElement("input");n.setAttribute("type","checkbox"),t.append(n),e[1]&&n.toggleAttribute("checked"),t.addEventListener("click",(()=>{e[1]=!e[1],c()}));const s=document.createElement("p");s.innerText=e[0],t.append(s)}));const T=document.createElement("div");T.classList.add("full-task-button-row"),m.append(T);const v=document.createElement("button");v.classList.add("full-task-edit"),v.innerText="Edit Task",T.append(v),v.addEventListener("click",(()=>{const t=e.copy();((e,t,n,s)=>{e.innerHTML="";const a=document.createElement("div");a.setAttribute("id","task-header"),e.append(a);const o=document.createElement("button");o.innerText="Back to Project",o.classList.add("back-button"),a.append(o),o.addEventListener("click",(()=>{i(e,t)}));const l=document.createElement("h1");l.innerText="Edit Task",a.appendChild(l);const r=document.createElement("div");r.setAttribute("id","task-container"),e.append(r);const p=((e,t,n,s)=>{const c=document.createElement("div");e.append(c);const a=document.createElement("label");a.innerText=t,c.append(a);const d=document.createElement(n);c.append(d);const i=s(d,a);return console.log(i),i})(r,"Title","input",d);p.setValue(s.title);const m=document.createElement("button");m.innerText="Save Task",e.append(m),m.addEventListener("click",(()=>{s.title=p.getValue(),t.taskList=t.taskList.map((e=>e===n?s:e)),c(),i(e,t)}))})(n.content,n.project,e,t)}));const h=document.createElement("button");h.classList.add("full-task-delete"),h.innerText="Delete Task",T.append(h),h.addEventListener("click",(()=>{t.remove(),n.project.deleteTask(e),c()}));const b=document.createElement("button");return b.classList.add("full-task-resolve"),b.innerText="Toggle Resolved",T.append(b),b.addEventListener("click",(()=>{e.resolved=!e.resolved,t.innerHTML="",r(e,t,n),c()})),s},p=e=>{switch(e){case"high":return"high-priority";case"medium":return"medium-priority";case"low":return"low-priority";default:return"no-priority"}},m=e=>{e.innerHTML="";const t=document.createElement("h1");t.innerText="TODO Lists",e.appendChild(t);const d=document.createElement("button");d.innerText="Create New Project",d.classList.add("create-button"),e.appendChild(d),d.addEventListener("click",(()=>{a(),m(e)}));const o=document.createElement("ul");o.setAttribute("id","project-list"),e.appendChild(o),n.forEach((t=>{const s=document.createElement("li");s.classList.add("project");const a=document.createElement("div");a.classList.add("project-title"),a.innerText=t.name,s.append(a);const d=document.createElement("div");d.classList.add("project-counter"),d.innerText=`${t.taskList.length} todos`,s.append(d);const l=document.createElement("button");l.classList.add("project-view"),l.innerText="View",s.append(l),l.addEventListener("click",(()=>{i(e,t)}));const r=document.createElement("button");r.classList.add("project-delete"),r.innerText="Delete",s.append(r),r.addEventListener("click",(()=>{(e=>{n=n.filter((t=>t!==e)),c()})(t),m(e)})),o.appendChild(s)})),e.appendChild(o);const l=document.createElement("button");l.classList.add("home-reset"),l.innerText="Reset all",e.append(l),l.addEventListener("click",(()=>{n=[],localStorage.setItem(s,JSON.stringify(null)),a(),m(e)}))};console.log("webpack compiled to main.js");const u=document.querySelector("#content");(()=>{const c=JSON.parse(localStorage.getItem(s));c&&0!==c.length?n=c.map((n=>(n=>{let s=n.taskList.map((t=>(t=>e(t))(t)));return t(n.name,s)})(n))):(console.log("initialize project list"),n=[],a()),console.table(n)})(),m(u),console.log("end of index")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza09iak1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdE9iak1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZU1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza1BhZ2VNb2R1bGUuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RQYWdlTW9kdWxlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ob21lUGFnZU1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsidGFza0ZhY3RvcnkiLCJ0aXRsZSIsImRlc2MiLCJub3RlcyIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNoZWNrTGlzdCIsInJlc29sdmVkIiwiY29weSIsImNDb3B5IiwibWFwIiwiZWxlbSIsInByb2plY3RGYWN0b3J5IiwibmFtZSIsInRhc2tMaXN0IiwiYWRkVGFzayIsIm5ld1Rhc2siLCJwdXNoIiwiZGVsZXRlVGFzayIsInQiLCJpIiwibGVuZ3RoIiwic3BsaWNlIiwicHJvamVjdExpc3QiLCJzdG9yYWdlTmFtZSIsInN0b3JlUHJvamVjdExpc3QiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZU5ld1Byb2plY3QiLCJwIiwidGV4dElucHV0RmFjdG9yeSIsImxhYmVsIiwic2V0VmFsdWUiLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImdldFZhbHVlIiwibG9hZFByb2plY3QiLCJjb250ZW50IiwicHJvamVjdCIsImlubmVySFRNTCIsInRvcENvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiYmFja2VyIiwiaW5uZXJUZXh0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvYWRIb21lIiwiaDEiLCJwcm9qZWN0TmFtZXIiLCJpbnB1dCIsInByb21wdCIsImNyZWF0ZXIiLCJ1TGlzdCIsInBhcmVudEluZm8iLCJmb3JFYWNoIiwicm93IiwiY3JlYXRlTWluaVRhc2tQYW5lIiwidGFzayIsImlubmVySXRlbSIsIm1pbmlUYXNrQ29udGVudCIsImV4cGFuZGVyIiwiYXBwZW5kIiwiY3JlYXRlRnVsbFRhc2tQYW5lIiwidFRpdGxlIiwidERhdGUiLCJwcmlvcml0eUNvbG9yIiwibWluaSIsInNocmlua2VyIiwiZGV0YWlscyIsInByaW8iLCJjTGlzdCIsImMiLCJjaGVjayIsImNCb3giLCJ0b2dnbGVBdHRyaWJ1dGUiLCJjVGV4dCIsImJ1dHRvblJvdyIsImVkaXQiLCJ0YXNrQ29weSIsImNvbnRhaW5lciIsImVsZW1UeXBlIiwiZmFjdG9yeSIsImJveCIsImlucHV0T2JqIiwiY29uc29sZSIsImxvZyIsImlucHV0TWFrZXIiLCJzYXZlIiwibG9hZFRhc2siLCJkZWxCdXR0b24iLCJyZW1vdmUiLCJyZXNvbHZlIiwiaXRlbSIsInBUaXRsZSIsInBUYXNrcyIsInBWaWV3IiwicERlbGV0ZSIsImZpbHRlciIsImRlbGV0ZVByb2plY3QiLCJyZXNldGVyIiwicXVlcnlTZWxlY3RvciIsImxvY2FsT2JqIiwicGFyc2UiLCJnZXRJdGVtIiwib2JqIiwidGFza0Zyb21PYmplY3QiLCJwcm9qZWN0RnJvbU9iamVjdCIsInRhYmxlIiwibG9hZFByb2plY3RMaXN0Il0sIm1hcHBpbmdzIjoibUJBR0EsTUFBTUEsRUFBYyxFQUFFQyxRQUNsQkMsT0FDQUMsUUFDQUMsVUFDQUMsV0FDQUMsWUFDQUMsZUE2Qk8sQ0FBQ04sUUFBT0MsT0FBTUMsUUFBT0MsVUFBU0MsV0FBVUMsWUFBV0MsV0FBVUMsS0FwQnZELEtBRVQsTUFBTUMsRUFBUUgsRUFBVUksS0FBS0MsR0FFbEIsQ0FBQ0EsRUFBSyxHQUFJQSxFQUFLLE1BYTFCLE9BVmdCWCxFQUFZLENBQ3hCQyxNQUFPQSxFQUNQQyxL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RWZrRCxRQUFRQyxJQUFJLCtCQUVaLE1BQU1uRCxFQUFVSSxTQUFTOEQsY0FBYyxZSkZmLE1BRXBCLE1BQU1DLEVBQVc5RSxLQUFLK0UsTUFBTWpGLGFBQWFrRixRQUFRcEYsSUFJN0NrRixHQUFnQyxJQUFwQkEsRUFBU3JGLE9BT3JCRSxFQUFjbUYsRUFBU2hHLEtBQUlDLEdEYVQsQ0FBQ2tHLElBQ3ZCLElBQUkvRixFQUFXK0YsRUFBSS9GLFNBQVNKLEtBQUlDLEdEUWJrRyxJQUNSN0csRUFBWTZHLEdDVGVDLENBQWVuRyxLQUdyRCxPQUZjQyxFQUFlaUcsRUFBSWhHLEtBQU1DLElDZkFpRyxDQUFrQnBHLE1BTnJEOEUsUUFBUUMsSUFBSSwyQkFDWm5FLEVBQWMsR0FDZE8sS0FNSjJELFFBQVF1QixNQUFNekYsSUlWbEIwRixHQUVBOUQsRUFBU1osR0FDVGtELFFBQVFDLElBQUksaUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vY29uc3RydWN0b3IgYW5kIGhlbHBlciBmdW5jdGlvbnMgZm9yIHRhc2svdG9kbyBvYmplY3RzXG5pbXBvcnQge2Zvcm1hdH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG5jb25zdCB0YXNrRmFjdG9yeSA9ICh7dGl0bGUsXG4gICAgZGVzYyxcbiAgICBub3RlcyxcbiAgICBkdWVEYXRlLFxuICAgIHByaW9yaXR5LFxuICAgIGNoZWNrTGlzdCxcbiAgICByZXNvbHZlZH0pID0+e1xuICAgIC8qY29uc3QgdGl0bGUgPSAnTmV3IFRhc2snO1xuICAgIGNvbnN0IGRlc2MgPSAnQSBkZWZhdWx0IHRhc2sgdGVtcGxhdGUnO1xuICAgIGNvbnN0IG5vdGVzID0gJ2JsYW5rIG5vdGVzJztcbiAgICBjb25zdCBkdWVEYXRlID0gJ3NldCB0aGlzIHNvbWVob3cnO1xuICAgIGNvbnN0IHByaW9yaXR5ID0gMDtcbiAgICBjb25zdCBjaGVja2xpc3QgPSBudWxsO1xuICAgIGNvbnN0IHJlc29sdmVkID0gZmFsc2U7Ki9cblxuICAgIGNvbnN0IGNvcHkgPSAoKSA9PntcblxuICAgICAgICBjb25zdCBjQ29weSA9IGNoZWNrTGlzdC5tYXAoKGVsZW0pPT5cbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIFtlbGVtWzBdLCBlbGVtWzFdXTtcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBuZXdUYXNrID0gdGFza0ZhY3Rvcnkoe1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgZGVzYzogZGVzYyxcbiAgICAgICAgICAgIG5vdGVzOiBub3RlcyxcbiAgICAgICAgICAgIGR1ZURhdGU6ICdiYWQgZm9yIG5vdycsXG4gICAgICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgICAgICAgICBjaGVja0xpc3Q6IGNDb3B5LFxuICAgICAgICAgICAgcmVzb2x2ZWQ6IHJlc29sdmVkLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbmV3VGFzaztcbiAgICB9XG5cbiAgICByZXR1cm4ge3RpdGxlLCBkZXNjLCBub3RlcywgZHVlRGF0ZSwgcHJpb3JpdHksIGNoZWNrTGlzdCwgcmVzb2x2ZWQsIGNvcHl9O1xufVxuXG4vL2NvbnZlcnQgYSBnZW5lcmljIG9iamVjdCB0byBhIHRhc2tcbmNvbnN0IHRhc2tGcm9tT2JqZWN0ID0gb2JqID0+e1xuICAgIGxldCB0YXNrID0gdGFza0ZhY3Rvcnkob2JqKTtcbiAgICByZXR1cm4gdGFzaztcbn1cblxuZXhwb3J0IHt0YXNrRmFjdG9yeSwgdGFza0Zyb21PYmplY3R9OyIsImltcG9ydCB7IHRhc2tGYWN0b3J5LCB0YXNrRnJvbU9iamVjdCB9IGZyb20gXCIuL3Rhc2tPYmpNb2R1bGVcIjtcblxuLy9jb25zdHJ1Y3RvciBhbmQgaGVscGVyIGZ1bmN0aW9ucyBmb3IgcHJvamVjdCBvYmplY3RzXG5jb25zdCBwcm9qZWN0RmFjdG9yeSA9IChuYW1lLCB0YXNrTGlzdCkgPT57XG5cbiAgICBjb25zdCBhZGRUYXNrID0gKCk9PntcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRhc2tGYWN0b3J5KHtcbiAgICAgICAgICAgIHRpdGxlOiAnTmV3IFRhc2snLCBcbiAgICAgICAgICAgIGRlc2M6ICdBIGJsYW5rIHRhc2snLCBcbiAgICAgICAgICAgIG5vdGVzOiAnYmxhbmsgbm90ZXMnLCBcbiAgICAgICAgICAgIGR1ZURhdGU6ICdzZXQgdGhpcyBzb21laG93JywgXG4gICAgICAgICAgICBwcmlvcml0eTogJ25vbmUnLCBcbiAgICAgICAgICAgIGNoZWNrTGlzdDogW1snc2FtcGxlIGNoZWNrYm94JywgZmFsc2VdXSwgXG4gICAgICAgICAgICByZXNvbHZlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRhc2tMaXN0LnB1c2gobmV3VGFzayk7XG4gICAgfVxuXG4gICAgLy9kZWxldGUgYSBwcm9qZWN0IGZyb20gdGhlIGxpc3RcbiAgICBjb25zdCBkZWxldGVUYXNrID0gKHQpID0+e1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFza0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRhc2tMaXN0W2ldID09PSB0KXtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge25hbWUsIHRhc2tMaXN0LCBhZGRUYXNrLCBkZWxldGVUYXNrfTtcbn1cblxuLy9jb252ZXJ0IGEgZ2VuZXJpYyBvYmplY3QgdG8gYSBwcm9qZWN0XG5jb25zdCBwcm9qZWN0RnJvbU9iamVjdCA9IChvYmopID0+e1xuICAgIGxldCB0YXNrTGlzdCA9IG9iai50YXNrTGlzdC5tYXAoZWxlbT0+dGFza0Zyb21PYmplY3QoZWxlbSkpO1xuICAgIGxldCBwcm9qZWN0ID0gcHJvamVjdEZhY3Rvcnkob2JqLm5hbWUsIHRhc2tMaXN0KTtcblxuICAgIHJldHVybiBwcm9qZWN0O1xufTtcblxuZXhwb3J0IHtwcm9qZWN0RmFjdG9yeSwgcHJvamVjdEZyb21PYmplY3R9OyIsImltcG9ydCB7cHJvamVjdEZhY3RvcnksIHByb2plY3RGcm9tT2JqZWN0fSBmcm9tIFwiLi9wcm9qZWN0T2JqTW9kdWxlXCI7XG5cbi8vaG9sZCB0aGUgcHJvamVjdCBsaXN0IGFuZCBoYW5kbGUgbG9jYWxzdG9yYWdlIGZ1bmN0aW9uc1xubGV0IHByb2plY3RMaXN0O1xuY29uc3Qgc3RvcmFnZU5hbWUgPSAnT2Rpbi1Ub2RvJztcblxuLy9sb2FkIHRoZSBwcm9qZWN0IGxpc3QgZnJvbSBsb2NhbCBzdG9yYWdlXG5jb25zdCBsb2FkUHJvamVjdExpc3QgPSAoKSA9PntcbiAgICAvL3RyeSB0byBsb2FkIGZyb20gc3RvcmFnZVxuICAgIGNvbnN0IGxvY2FsT2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlTmFtZSkpO1xuICAgIC8vY29uc29sZS50YWJsZShsb2NhbE9iaik7XG5cbiAgICAvL2lmIG5vIHJlc3VsdHMgZm91bmQsIGNyZWF0ZSBhIGRlZmF1bHQgb25lXG4gICAgaWYoIWxvY2FsT2JqIHx8IGxvY2FsT2JqLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0aWFsaXplIHByb2plY3QgbGlzdCcpO1xuICAgICAgICBwcm9qZWN0TGlzdCA9IFtdO1xuICAgICAgICBjcmVhdGVOZXdQcm9qZWN0KCk7XG4gICAgfVxuICAgIC8vbG9hZCBleGlzdGluZyBwcm9qZWN0LCBjb252ZXJ0IGdlbmVyaWMgb2JqZWN0cyB0byBwcm9qZWN0cy90YXNrcy9jaGVja2xpc3RzXG4gICAgZWxzZXtcbiAgICAgICAgcHJvamVjdExpc3QgPSBsb2NhbE9iai5tYXAoZWxlbSA9PiBwcm9qZWN0RnJvbU9iamVjdChlbGVtKSk7XG4gICAgfVxuICAgIGNvbnNvbGUudGFibGUocHJvamVjdExpc3QpO1xufVxuXG4vL3N0b3JlIHRoZSBwcm9qZWN0IGxpc3QgaW4gbG9jYWwgc3RvcmFnZVxuY29uc3Qgc3RvcmVQcm9qZWN0TGlzdCA9ICgpID0+e1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VOYW1lLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIC8vY29uc29sZS5sb2cocHJvamVjdExpc3QpO1xufVxuXG4vL3Jlc2V0IHRoZSBsb2NhbCBzdG9yYWdlXG5jb25zdCByZXNldFN0b3JhZ2UgPSAoKSA9PntcbiAgICBwcm9qZWN0TGlzdCA9IFtdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VOYW1lLCBKU09OLnN0cmluZ2lmeShudWxsKSk7XG59XG5cbi8vbGV0IHRoZSBwcm9qZWN0IGhhdmUgYWNjZXNzIHRvIHByb2plY3QgbGlzdFxuY29uc3QgZ2V0UHJvamVjdExpc3QgPSAoKSA9PntcbiAgICByZXR1cm4gcHJvamVjdExpc3Q7XG59XG5cbi8vYWRkIGEgYmxhbmsgcHJvamVjdCB0byB0aGUgbGlzdFxuY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9ICgpID0+e1xuICAgIGNvbnN0IHAgPSBwcm9qZWN0RmFjdG9yeShcIk5ldyBQcm9qZWN0XCIsIFtdKTtcbiAgICBwLmFkZFRhc2soKTtcbiAgICBwcm9qZWN0TGlzdC5wdXNoKHApO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbn1cblxuLy9kZWxldGUgYSBwcm9qZWN0IGZyb20gdGhlIGxpc3RcbmNvbnN0IGRlbGV0ZVByb2plY3QgPSAocCkgPT57XG4gICAgcHJvamVjdExpc3QgPSBwcm9qZWN0TGlzdC5maWx0ZXIoKGVsZW0pPT4gZWxlbSAhPT0gcCk7XG4gICAgc3RvcmVQcm9qZWN0TGlzdCgpO1xufVxuXG5leHBvcnQge2xvYWRQcm9qZWN0TGlzdCwgc3RvcmVQcm9qZWN0TGlzdCwgcmVzZXRTdG9yYWdlLCBnZXRQcm9qZWN0TGlzdCwgY3JlYXRlTmV3UHJvamVjdCwgZGVsZXRlUHJvamVjdH07XG4iLCJpbXBvcnQgeyBzdG9yZVByb2plY3RMaXN0IH0gZnJvbSBcIi4vc3RvcmFnZU1vZHVsZVwiO1xuaW1wb3J0IHtsb2FkUHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdFBhZ2VNb2R1bGUuanNcIjtcblxuY29uc3QgbG9hZFRhc2sgPSAoY29udGVudCwgcHJvamVjdCwgdGFzaywgdGFza0NvcHkpID0+e1xuICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgLy90b3AgZWxlbWVudCBjb250YWluZXJcbiAgY29uc3QgdG9wQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRvcENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2staGVhZGVyJyk7XG4gIGNvbnRlbnQuYXBwZW5kKHRvcENvbnRhaW5lcik7XG5cbiAgLy9iYWNrIGJ1dHRvblxuICBjb25zdCBiYWNrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYmFja2VyLmlubmVyVGV4dCA9ICdCYWNrIHRvIFByb2plY3QnO1xuICBiYWNrZXIuY2xhc3NMaXN0LmFkZCgnYmFjay1idXR0b24nKTtcbiAgdG9wQ29udGFpbmVyLmFwcGVuZChiYWNrZXIpO1xuICBiYWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICBsb2FkUHJvamVjdChjb250ZW50LCBwcm9qZWN0KTtcbiAgfSlcblxuICAvL2gxXG4gIGNvbnN0IGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgaDEuaW5uZXJUZXh0ID0gJ0VkaXQgVGFzayc7XG4gIHRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChoMSk7XG5cbiAgLy9jb250YWluZXJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2stY29udGFpbmVyJyk7XG4gIGNvbnRlbnQuYXBwZW5kKGNvbnRhaW5lcik7XG5cbiAgLy90b2RvOiBhbGwgdGFzayBlbGVtZW50cyBhcyBpbnB1dHNcblxuICAvL3RpdGxlXG4gIGNvbnN0IHRpdGxlID0gaW5wdXRNYWtlcihjb250YWluZXIsICdUaXRsZScsICdpbnB1dCcsIHRleHRJbnB1dEZhY3RvcnkpO1xuICB0aXRsZS5zZXRWYWx1ZSh0YXNrQ29weS50aXRsZSk7XG5cbiAgLy9kZXNjXG5cbiAgLy9ub3Rlc1xuXG4gIC8vZGF0ZVxuXG4gIC8vcHJpb3JpdHlcblxuXG5cbiAgLy9zYXZlIGJ1dHRvblxuICBjb25zdCBzYXZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIHNhdmUuaW5uZXJUZXh0ID0gJ1NhdmUgVGFzayc7XG4gIGNvbnRlbnQuYXBwZW5kKHNhdmUpO1xuICBzYXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAvL3RvZG86IHVwZGF0ZSB0aGUgY29weSB3aXRoIGFsbCB0aGUgdmFsdWVzIGZyb20gdGhlIGlucHV0c1xuICAgIHRhc2tDb3B5LnRpdGxlID0gdGl0bGUuZ2V0VmFsdWUoKTtcblxuICAgIC8vcmVwbGFjZSB0aGUgb3JpZ2luYWwgdGFzayB3aXRoIHRoZSBjb3B5XG4gICAgcHJvamVjdC50YXNrTGlzdCA9IHByb2plY3QudGFza0xpc3QubWFwKChlbGVtKT0+e1xuICAgICAgICBpZihlbGVtID09PSB0YXNrKVxuICAgICAgICAgICAgcmV0dXJuIHRhc2tDb3B5O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9KTtcblxuICAgIC8vc2F2ZSBhbmQgZ28gYmFja1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgICBsb2FkUHJvamVjdChjb250ZW50LCBwcm9qZWN0KTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbnB1dE1ha2VyID0gKGVsZW0sIHRpdGxlLCBlbGVtVHlwZSwgZmFjdG9yeSkgPT5cbntcbiAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtLmFwcGVuZChib3gpO1xuXG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIGxhYmVsLmlubmVyVGV4dCA9IHRpdGxlO1xuICAgIGJveC5hcHBlbmQobGFiZWwpO1xuXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1UeXBlKTtcbiAgICBib3guYXBwZW5kKGlucHV0KTtcblxuICAgIGNvbnN0IGlucHV0T2JqID0gZmFjdG9yeShpbnB1dCwgbGFiZWwpO1xuICAgIGNvbnNvbGUubG9nKGlucHV0T2JqKTtcblxuICAgIHJldHVybiBpbnB1dE9iajtcbn1cblxuLy9mYWN0b3J5IHRvIGNyZWF0ZSBhbiBvYmplY3QgdG8gbWFuYWdlIGFuIGlucHV0IGVsZW1lbnRcbi8vdG9kbzogbGVhcm4gZmFjdG9yeSBhYnN0cmFjdHMvaW50ZXJmYWNlcyB0byBtYWtlIG9iamVjdHMgbW9yZSB1bmlmb3JtXG4vL2Fsc28gbGVhcm4gc3RhdGljIHZhcmlhYmxlcyBmb3IgZmFjdG9yaWVzXG5jb25zdCB0ZXh0SW5wdXRGYWN0b3J5ID0gKGVsZW0sIGxhYmVsKSA9PntcbiAgICBjb25zdCBzZXRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgndmFsdWUnLHZhbHVlKTtcbiAgICB9O1xuICAgIGNvbnN0IGdldFZhbHVlID0gKCkgPT4gXG4gICAge1xuICAgICAgICByZXR1cm4gZWxlbS52YWx1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtlbGVtLCBsYWJlbCwgc2V0VmFsdWUsIGdldFZhbHVlfTtcbn1cblxuY29uc3QgdGV4dEFyZWFGYWN0b3J5ID0gKGVsZW0sIGxhYmVsKSA9PntcbiAgY29uc3Qgc2V0VmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICAgIGVsZW0uaW5uZXJUZXh0ID0gdmFsdWU7XG4gIH07XG4gIGNvbnN0IGdldFZhbHVlID0gKCkgPT4gXG4gIHtcbiAgICAgIHJldHVybiBlbGVtLmlubmVyVGV4dDtcbiAgfTtcblxuICAgIHJldHVybiB7ZWxlbSwgbGFiZWwsIHNldFZhbHVlLCBnZXRWYWx1ZX07XG59XG5cbmV4cG9ydCB7bG9hZFRhc2t9OyIsImltcG9ydCB7IGxvYWRIb21lIH0gZnJvbSBcIi4vaG9tZVBhZ2VNb2R1bGVcIjtcbmltcG9ydCB7IHN0b3JlUHJvamVjdExpc3QgfSBmcm9tIFwiLi9zdG9yYWdlTW9kdWxlXCI7XG5pbXBvcnQgeyBsb2FkVGFzayB9IGZyb20gXCIuL3Rhc2tQYWdlTW9kdWxlXCI7XG5cbi8vbW9kdWxlIGZvciBkaXNwbGF5aW5nIHRhc2tzIHdpdGhpbiBhIHByb2plY3RcblxuLy91c2UgdGhlIGN1cnJlbnQgcHJvamVjdCB0byBhc3NlbWJsZSBhbiBodG1sIHBhZ2VcbmNvbnN0IGxvYWRQcm9qZWN0ID0gKGNvbnRlbnQsIHByb2plY3QpID0+e1xuICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gIC8vdG9wIGVsZW1lbnQgY29udGFpbmVyXG4gIGNvbnN0IHRvcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0b3BDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LWluZm8nKTtcbiAgY29udGVudC5hcHBlbmRDaGlsZCh0b3BDb250YWluZXIpO1xuXG4gIC8vYmFjayBidXR0b25cbiAgY29uc3QgYmFja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJhY2tlci5pbm5lclRleHQgPSAnQmFjayB0byBIb21lJztcbiAgYmFja2VyLmNsYXNzTGlzdC5hZGQoJ2JhY2stYnV0dG9uJyk7XG4gIHRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChiYWNrZXIpO1xuICBiYWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICBsb2FkSG9tZShjb250ZW50KTtcbiAgfSlcblxuICAvL2gxXG4gIGNvbnN0IGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgaDEuaW5uZXJUZXh0ID0gcHJvamVjdC5uYW1lO1xuICB0b3BDb250YWluZXIuYXBwZW5kQ2hpbGQoaDEpO1xuXG4gIC8vcmVuYW1lIGJ1dHRvblxuICBjb25zdCBwcm9qZWN0TmFtZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgcHJvamVjdE5hbWVyLmlubmVyVGV4dCA9ICdSZW5hbWUgUHJvamVjdCc7XG4gIHByb2plY3ROYW1lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXJlbmFtZScpO1xuICB0b3BDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVyKTtcbiAgXG4gIHByb2plY3ROYW1lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgY29uc3QgaW5wdXQgPSBwcm9tcHQoJ05ldyBwcm9qZWN0IG5hbWU/Jyk7XG4gICAgaWYoaW5wdXQpe1xuICAgICAgcHJvamVjdC5uYW1lID0gaW5wdXQ7XG4gICAgICBoMS5pbm5lclRleHQgPSBpbnB1dDtcbiAgICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgLy9jcmVhdGUgYnV0dG9uXG4gIGNvbnN0IGNyZWF0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY3JlYXRlci5pbm5lclRleHQgPSAnQ3JlYXRlIE5ldyBUYXNrJztcbiAgY3JlYXRlci5jbGFzc0xpc3QuYWRkKCdjcmVhdGUtYnV0dG9uJyk7XG4gIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY3JlYXRlcik7XG4gIGNyZWF0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgIHByb2plY3QuYWRkVGFzaygpO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgICBsb2FkUHJvamVjdChjb250ZW50LCBwcm9qZWN0KTtcbiAgfSk7XG5cbiAgLy91bFxuICBjb25zdCB1TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gIHVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAndGFzay1saXN0Jyk7XG4gIGNvbnRlbnQuYXBwZW5kQ2hpbGQodUxpc3QpO1xuXG4gIC8vbGkgZWxlbWVudHNcbiAgY29uc3QgdGFza0xpc3QgPSBwcm9qZWN0LnRhc2tMaXN0O1xuICBjb25zdCBwYXJlbnRJbmZvID0ge2NvbnRlbnQsIHByb2plY3R9O1xuICAvL2NvbnNvbGUubG9nKHByb2plY3RMaXN0KTtcbiAgdGFza0xpc3QuZm9yRWFjaCh0ID0+IHtcbiAgICAvL2xpIGVsZW1lbnRcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIHVMaXN0LmFwcGVuZENoaWxkKHJvdyk7XG5cbiAgICAvL21pbmktcGFuZVxuICAgIGNyZWF0ZU1pbmlUYXNrUGFuZSh0LCByb3csIHBhcmVudEluZm8pO1xuICB9KTtcblxuICAvL2FwcGVuZCBsaXN0IHRvIGNvbnRlbnRcbiAgY29udGVudC5hcHBlbmRDaGlsZCh1TGlzdCk7XG59XG5cbmNvbnN0IGNyZWF0ZU1pbmlUYXNrUGFuZSA9ICh0YXNrLCBlbGVtLCBwYXJlbnRJbmZvKT0+e1xuICBjb25zdCBpbm5lckl0ZW0gPSBtaW5pVGFza0NvbnRlbnQodGFzaywgZWxlbSk7XG5cbiAgLy9leHBhbmRcbiAgY29uc3QgZXhwYW5kZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgZXhwYW5kZXIuY2xhc3NMaXN0LmFkZCgnbWluaS10YXNrLWV4cGFuZCcpO1xuICBleHBhbmRlci5pbm5lclRleHQgPSAnPic7XG4gIGlubmVySXRlbS5hcHBlbmQoZXhwYW5kZXIpO1xuICBleHBhbmRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgZWxlbS5pbm5lckhUTUwgPSAnJztcbiAgICBjcmVhdGVGdWxsVGFza1BhbmUodGFzaywgZWxlbSwgcGFyZW50SW5mbyk7XG4gIH0pO1xuXG4gIHJldHVybiBpbm5lckl0ZW07XG59O1xuXG5jb25zdCBtaW5pVGFza0NvbnRlbnQgPSAodGFzaywgZWxlbSwgcGFyZW50SW5mbykgPT4ge1xuICBjb25zdCBpbm5lckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW5uZXJJdGVtLmNsYXNzTGlzdC5hZGQoJ21pbmktdGFzaycpO1xuICBlbGVtLmFwcGVuZChpbm5lckl0ZW0pO1xuXG4gIC8vdGl0bGVcbiAgY29uc3QgdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRUaXRsZS5jbGFzc0xpc3QuYWRkKCdtaW5pLXRhc2stdGl0bGUnKTtcbiAgdFRpdGxlLmlubmVyVGV4dCA9IHRhc2sudGl0bGU7XG4gIGlubmVySXRlbS5hcHBlbmQodFRpdGxlKTtcblxuICAvL2R1ZSBkYXRlXG4gIGNvbnN0IHREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHREYXRlLmNsYXNzTGlzdC5hZGQoJ21pbmktdGFzay1kYXRlJyk7XG4gIHREYXRlLmlubmVyVGV4dCA9IHRhc2suZHVlRGF0ZTtcbiAgaW5uZXJJdGVtLmFwcGVuZCh0RGF0ZSk7XG5cbiAgLy9zZXQgcHJpb3JpdHkgY29sb3JcbiAgaWYodGFzay5yZXNvbHZlZClcbiAgICBpbm5lckl0ZW0uY2xhc3NMaXN0LmFkZChwcmlvcml0eUNvbG9yKCdub25lJykpO1xuICBlbHNlXG4gICAgaW5uZXJJdGVtLmNsYXNzTGlzdC5hZGQocHJpb3JpdHlDb2xvcih0YXNrLnByaW9yaXR5KSk7XG5cbiAgcmV0dXJuIGlubmVySXRlbTtcbn07XG5cbmNvbnN0IGNyZWF0ZUZ1bGxUYXNrUGFuZSA9ICh0YXNrLCBlbGVtLCBwYXJlbnRJbmZvKT0+e1xuICBjb25zdCBpbm5lckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW5uZXJJdGVtLmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzaycpO1xuICBlbGVtLmFwcGVuZChpbm5lckl0ZW0pO1xuXG4gIC8vY29weSB0aGUgY29udGVudCBvZiB0aGUgbWluaS10YXNrIGJhclxuICBjb25zdCBtaW5pID0gbWluaVRhc2tDb250ZW50KHRhc2ssIGlubmVySXRlbSk7XG5cbiAgLy9zaHJpbmtcbiAgY29uc3Qgc2hyaW5rZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgc2hyaW5rZXIuY2xhc3NMaXN0LmFkZCgnbWluaS10YXNrLWV4cGFuZCcpO1xuICBzaHJpbmtlci5pbm5lclRleHQgPSAnXic7XG4gIG1pbmkuYXBwZW5kKHNocmlua2VyKTtcbiAgc2hyaW5rZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgIGVsZW0uaW5uZXJIVE1MID0gJyc7XG4gICAgY3JlYXRlTWluaVRhc2tQYW5lKHRhc2ssIGVsZW0pO1xuICB9KTtcblxuICAvL2V4cGFuZGVkIGRldGFpbHNcbiAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkZXRhaWxzLmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay1kZXRhaWxzJyk7XG4gIGVsZW0uYXBwZW5kKGRldGFpbHMpO1xuXG4gIC8vZGVzY3JpcHRpb25cbiAgY29uc3QgZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkZXNjLmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay10ZXh0Jyk7XG4gIGRlc2MuaW5uZXJUZXh0ID0gdGFzay5kZXNjO1xuICBkZXRhaWxzLmFwcGVuZChkZXNjKTtcblxuICAvL25vdGVzXG4gIGNvbnN0IG5vdGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIG5vdGVzLmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay10ZXh0Jyk7XG4gIG5vdGVzLmlubmVyVGV4dCA9IHRhc2subm90ZXM7XG4gIGRldGFpbHMuYXBwZW5kKG5vdGVzKTtcblxuICAvL3ByaW9yaXR5XG4gIGNvbnN0IHByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcHJpby5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stdGV4dCcpO1xuICBpZih0YXNrLnJlc29sdmVkKVxuICAgIHByaW8uaW5uZXJUZXh0ID0gYFByaW9yaXR5OiBub25lIChyZXNvbHZlZClgO1xuICBlbHNlXG4gICAgcHJpby5pbm5lclRleHQgPSBgUHJpb3JpdHk6ICR7dGFzay5wcmlvcml0eX1gO1xuICBkZXRhaWxzLmFwcGVuZChwcmlvKTtcblxuICAvL2NoZWNrbGlzdFxuICBjb25zdCBjTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gIGNMaXN0LmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay1saXN0Jyk7XG4gIGRldGFpbHMuYXBwZW5kKGNMaXN0KTtcblxuICB0YXNrLmNoZWNrTGlzdC5mb3JFYWNoKGM9PntcbiAgICAvL291dGVyIGNvbnRhaW5lclxuICAgIGNvbnN0IGNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjaGVjay5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stbGlzdC1pdGVtJyk7XG4gICAgY0xpc3QuYXBwZW5kKGNoZWNrKTtcblxuICAgIC8vY2hlY2tib3hcbiAgICBjb25zdCBjQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBjQm94LnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGNoZWNrLmFwcGVuZChjQm94KTtcbiAgICBpZihjWzFdKVxuICAgICAgY0JveC50b2dnbGVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcbiAgICBjaGVjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICBjWzFdID0gIWNbMV07XG4gICAgICBzdG9yZVByb2plY3RMaXN0KCk7XG4gICAgfSk7XG5cbiAgICAvL3RleHQgZm9yIGNoZWNrYm94XG4gICAgY29uc3QgY1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY1RleHQuaW5uZXJUZXh0ID0gY1swXTtcbiAgICBjaGVjay5hcHBlbmQoY1RleHQpO1xuICB9KTtcblxuICAvL2J1dHRvbnNcbiAgY29uc3QgYnV0dG9uUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGJ1dHRvblJvdy5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stYnV0dG9uLXJvdycpO1xuICBkZXRhaWxzLmFwcGVuZChidXR0b25Sb3cpO1xuXG4gIC8vZWRpdCBidXR0b25cbiAgY29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBlZGl0LmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay1lZGl0Jyk7XG4gIGVkaXQuaW5uZXJUZXh0ID0gJ0VkaXQgVGFzayc7XG4gIGJ1dHRvblJvdy5hcHBlbmQoZWRpdCk7XG5cbiAgZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgIC8vY29weSB0aGUgdGFza1xuICAgIGNvbnN0IHRhc2tDb3B5ID0gdGFzay5jb3B5KCk7XG4gICAgbG9hZFRhc2socGFyZW50SW5mby5jb250ZW50LCBwYXJlbnRJbmZvLnByb2plY3QsIHRhc2ssIHRhc2tDb3B5KTtcbiAgfSk7XG5cbiAgLy9kZWxldGUgYnV0dG9uXG4gIGNvbnN0IGRlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBkZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLWRlbGV0ZScpO1xuICBkZWxCdXR0b24uaW5uZXJUZXh0ID0gJ0RlbGV0ZSBUYXNrJztcbiAgYnV0dG9uUm93LmFwcGVuZChkZWxCdXR0b24pO1xuICBkZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICAvL2Nhbm5vdCByZWZyZXNoIGJlY2F1c2Ugbm8gcmVmZXJlbmNlIHRvIHRoZSBwcm9qZWN0IGhlcmVcbiAgICBlbGVtLnJlbW92ZSgpO1xuICAgIHBhcmVudEluZm8ucHJvamVjdC5kZWxldGVUYXNrKHRhc2spO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgfSk7XG5cbiAgLy9yZXNvbHZlIGJ1dHRvblxuICBjb25zdCByZXNvbHZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIHJlc29sdmUuY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLXJlc29sdmUnKTtcbiAgcmVzb2x2ZS5pbm5lclRleHQgPSAnVG9nZ2xlIFJlc29sdmVkJztcbiAgYnV0dG9uUm93LmFwcGVuZChyZXNvbHZlKTtcbiAgcmVzb2x2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgIC8vY2Fubm90IHJlZnJlc2ggYmVjYXVzZSBubyByZWZlcmVuY2UgdG8gdGhlIHByb2plY3QgaGVyZVxuICAgIHRhc2sucmVzb2x2ZWQgPSAhdGFzay5yZXNvbHZlZDtcbiAgICBlbGVtLmlubmVySFRNTCA9ICcnO1xuICAgIGNyZWF0ZUZ1bGxUYXNrUGFuZSh0YXNrLCBlbGVtLCBwYXJlbnRJbmZvKTtcbiAgICBzdG9yZVByb2plY3RMaXN0KCk7XG4gIH0pO1xuXG4gIHJldHVybiBpbm5lckl0ZW07XG59XG5cbmNvbnN0IHByaW9yaXR5Q29sb3IgPSAocHJpb3JpdHkpPT57XG4gIHN3aXRjaChwcmlvcml0eSl7XG4gICAgY2FzZSAnaGlnaCc6IFxuICAgICAgcmV0dXJuICdoaWdoLXByaW9yaXR5JztcbiAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgcmV0dXJuICdtZWRpdW0tcHJpb3JpdHknO1xuICAgIGNhc2UgJ2xvdyc6XG4gICAgICByZXR1cm4gJ2xvdy1wcmlvcml0eSc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnbm8tcHJpb3JpdHknO1xuICB9XG59XG5cbmV4cG9ydCB7bG9hZFByb2plY3R9OyIsImltcG9ydCB7IHJlc2V0U3RvcmFnZSwgZ2V0UHJvamVjdExpc3QsIGNyZWF0ZU5ld1Byb2plY3QsIGRlbGV0ZVByb2plY3R9IGZyb20gXCIuL3N0b3JhZ2VNb2R1bGVcIjtcbmltcG9ydCB7IGxvYWRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFBhZ2VNb2R1bGVcIjtcblxuLy9tb2R1bGUgZm9yIGRpc3BsYXlpbmcgcHJvamVjdHMgb24gYSBtYWluIHBhZ2VcblxuLy9nZXQgdGhlIGN1cnJlbnQgcHJvamVjdCBsaXN0IGFuZCBhc3NlbWJsZSBhbiBodG1sIHBhZ2VcbmNvbnN0IGxvYWRIb21lID0gY29udGVudCA9PntcbiAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgLy9oMVxuICAgIGNvbnN0IGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgICBoMS5pbm5lclRleHQgPSAnVE9ETyBMaXN0cyc7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChoMSk7XG5cbiAgICAvL2J1dHRvblxuICAgIGNvbnN0IGNyZWF0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjcmVhdGVyLmlubmVyVGV4dCA9ICdDcmVhdGUgTmV3IFByb2plY3QnO1xuICAgIGNyZWF0ZXIuY2xhc3NMaXN0LmFkZCgnY3JlYXRlLWJ1dHRvbicpO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY3JlYXRlcik7XG4gICAgY3JlYXRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICBjcmVhdGVOZXdQcm9qZWN0KCk7XG4gICAgICBsb2FkSG9tZShjb250ZW50KTtcbiAgICB9KTtcblxuICAgIC8vdWxcbiAgICBjb25zdCB1TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LWxpc3QnKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHVMaXN0KTtcblxuICAgIC8vbGkgZWxlbWVudHNcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IGdldFByb2plY3RMaXN0KCk7XG4gICAgLy9jb25zb2xlLmxvZyhwcm9qZWN0TGlzdCk7XG4gICAgcHJvamVjdExpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIC8vY29uc29sZS5sb2cocCk7XG4gICAgICAvL2xpIGVsZW1lbnRcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG5cbiAgICAgIC8vdGl0bGVcbiAgICAgIGNvbnN0IHBUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcFRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtdGl0bGUnKTtcbiAgICAgIHBUaXRsZS5pbm5lclRleHQgPSBwLm5hbWU7XG4gICAgICBpdGVtLmFwcGVuZChwVGl0bGUpO1xuXG4gICAgICAvL3Rhc2sgY291bnRcbiAgICAgIGNvbnN0IHBUYXNrcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBwVGFza3MuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1jb3VudGVyJyk7XG4gICAgICBwVGFza3MuaW5uZXJUZXh0ID0gYCR7cC50YXNrTGlzdC5sZW5ndGh9IHRvZG9zYDtcbiAgICAgIGl0ZW0uYXBwZW5kKHBUYXNrcyk7XG5cbiAgICAgIC8vdmlld1xuICAgICAgY29uc3QgcFZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgcFZpZXcuY2xhc3NMaXN0LmFkZCgncHJvamVjdC12aWV3Jyk7XG4gICAgICBwVmlldy5pbm5lclRleHQgPSAnVmlldyc7XG4gICAgICBpdGVtLmFwcGVuZChwVmlldyk7XG4gICAgICBwVmlldy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIGxvYWRQcm9qZWN0KGNvbnRlbnQsIHApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vZGVsZXRlIFxuICAgICAgY29uc3QgcERlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgICBwRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtZGVsZXRlJyk7XG4gICAgICBwRGVsZXRlLmlubmVyVGV4dCA9ICdEZWxldGUnO1xuICAgICAgaXRlbS5hcHBlbmQocERlbGV0ZSk7XG4gICAgICBwRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgICAgZGVsZXRlUHJvamVjdChwKTtcbiAgICAgICAgbG9hZEhvbWUoY29udGVudCk7XG4gICAgICB9KTtcblxuICAgICAgLy9hcHBlbmQgdG8gbGlzdFxuICAgICAgdUxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgfSk7XG5cbiAgICAvL2FwcGVuZCBsaXN0IHRvIGNvbnRlbnRcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHVMaXN0KTtcblxuICAgIC8vYSByZXNldCBidXR0b25cbiAgICBjb25zdCByZXNldGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICByZXNldGVyLmNsYXNzTGlzdC5hZGQoJ2hvbWUtcmVzZXQnKTtcbiAgICByZXNldGVyLmlubmVyVGV4dCA9ICdSZXNldCBhbGwnO1xuICAgIGNvbnRlbnQuYXBwZW5kKHJlc2V0ZXIpO1xuICAgIHJlc2V0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgcmVzZXRTdG9yYWdlKCk7XG4gICAgICBjcmVhdGVOZXdQcm9qZWN0KCk7XG4gICAgICBsb2FkSG9tZShjb250ZW50KTtcbiAgICB9KVxufVxuXG5leHBvcnQge2xvYWRIb21lfTsiLCJpbXBvcnQge2xvYWRIb21lfSBmcm9tIFwiLi9ob21lUGFnZU1vZHVsZS5qc1wiO1xuaW1wb3J0IHtwcm9qZWN0RmFjdG9yeX0gZnJvbSBcIi4vcHJvamVjdE9iak1vZHVsZS5qc1wiO1xuaW1wb3J0IHtsb2FkUHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdFBhZ2VNb2R1bGUuanNcIjtcbmltcG9ydCB7dGFza0ZhY3Rvcnl9IGZyb20gXCIuL3Rhc2tPYmpNb2R1bGVcIjtcbmltcG9ydCB7bG9hZFByb2plY3RMaXN0LCBzdG9yZVByb2plY3RMaXN0LCByZXNldFN0b3JhZ2V9IGZyb20gXCIuL3N0b3JhZ2VNb2R1bGVcIlxuXG4vL3Rlc3QgdGhhdCB3ZWJwYWNrIHdvcmtzXG5jb25zb2xlLmxvZygnd2VicGFjayBjb21waWxlZCB0byBtYWluLmpzJyk7XG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpO1xuXG4vL3Jlc2V0U3RvcmFnZSgpOyAvL3RvZG86IHJlbW92ZSB0aGlzIHJlc2V0XG5sb2FkUHJvamVjdExpc3QoKTtcblxubG9hZEhvbWUoY29udGVudCk7XG5jb25zb2xlLmxvZygnZW5kIG9mIGluZGV4Jyk7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=