(()=>{"use strict";const e=({title:t,desc:n,notes:s,dueDate:c,priority:d,checkList:a,resolved:i})=>({title:t,desc:n,notes:s,dueDate:c,priority:d,checkList:a,resolved:i,copy:()=>{const c=a.map((e=>[e[0],e[1]]));return e({title:t,desc:n,notes:s,dueDate:"bad for now",priority:d,checkList:c,resolved:i})}}),t=(t,n)=>({name:t,taskList:n,addTask:()=>{const t=e({title:"New Task",desc:"A blank task",notes:"blank notes",dueDate:"set this somehow",priority:"none",checkList:[["sample checkbox",!0]],resolved:!1});n.push(t)},deleteTask:e=>{for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}}});let n;const s="Odin-Todo",c=()=>{localStorage.setItem(s,JSON.stringify(n))},d=()=>{const e=t("New Project",[]);e.addTask(),n.push(e),c()},a=(e,t)=>{e.innerHTML="";const n=document.createElement("div");n.setAttribute("id","project-info"),e.appendChild(n);const s=document.createElement("button");s.innerText="Back to Home",s.classList.add("back-button"),n.appendChild(s),s.addEventListener("click",(()=>{p(e)}));const d=document.createElement("h1");d.innerText=t.name,n.appendChild(d);const o=document.createElement("button");o.innerText="Rename Project",o.classList.add("project-rename"),n.appendChild(o);const l=document.createElement("button");l.innerText="Create New Task",l.classList.add("create-button"),e.appendChild(l),l.addEventListener("click",(()=>{t.addTask(),c(),a(e,t)}));const r=document.createElement("ul");r.setAttribute("id","task-list"),e.appendChild(r);const m=t.taskList,u={content:e,project:t};m.forEach((e=>{const t=document.createElement("li");r.appendChild(t),i(e,t,u)})),e.appendChild(r)},i=(e,t,n)=>{const s=o(e,t),c=document.createElement("button");return c.classList.add("mini-task-expand"),c.innerText=">",s.append(c),c.addEventListener("click",(()=>{t.innerHTML="",l(e,t,n)})),s},o=(e,t,n)=>{const s=document.createElement("div");s.classList.add("mini-task"),t.append(s);const c=document.createElement("div");c.classList.add("mini-task-title"),c.innerText=e.title,s.append(c);const d=document.createElement("div");return d.classList.add("mini-task-date"),d.innerText=e.dueDate,s.append(d),e.resolved?s.classList.add(r("none")):s.classList.add(r(e.priority)),s},l=(e,t,n)=>{const s=document.createElement("div");s.classList.add("full-task"),t.append(s);const d=o(e,s),r=document.createElement("button");r.classList.add("mini-task-expand"),r.innerText="^",d.append(r),r.addEventListener("click",(()=>{t.innerHTML="",i(e,t)}));const p=document.createElement("div");p.classList.add("full-task-details"),t.append(p);const m=document.createElement("div");m.classList.add("full-task-text"),m.innerText=e.desc,p.append(m);const u=document.createElement("div");u.classList.add("full-task-text"),u.innerText=e.notes,p.append(u);const k=document.createElement("div");k.classList.add("full-task-text"),e.resolved?k.innerText="Priority: none (resolved)":k.innerText=`Priority: ${e.priority}`,p.append(k);const L=document.createElement("ul");L.classList.add("full-task-list"),p.append(L),e.checkList.forEach((e=>{const t=document.createElement("li");t.classList.add("full-task-list-item"),L.append(t);const n=document.createElement("input");n.setAttribute("type","checkbox"),t.append(n);const s=document.createElement("p");s.innerText=e[0],t.append(s)}));const E=document.createElement("div");E.classList.add("full-task-button-row"),p.append(E);const T=document.createElement("button");T.classList.add("full-task-edit"),T.innerText="Edit Task",E.append(T),T.addEventListener("click",(()=>{e.copy(),((e,t,n,s)=>{e.innerHTML="";const c=document.createElement("div");c.setAttribute("id","project-info"),e.appendChild(c);const d=document.createElement("button");d.innerText="Back to Project",d.classList.add("back-button"),c.appendChild(d),d.addEventListener("click",(()=>{a(e,t)}));const i=document.createElement("h1");i.innerText="Edit Task",c.appendChild(i)})(n.content,n.project)}));const h=document.createElement("button");h.classList.add("full-task-delete"),h.innerText="Delete Task",E.append(h),h.addEventListener("click",(()=>{t.remove(),n.project.deleteTask(e),c()}));const v=document.createElement("button");return v.classList.add("full-task-resolve"),v.innerText="Resolve Task",E.append(v),v.addEventListener("click",(()=>{e.resolved=!0,t.innerHTML="",l(e,t,n),c()})),s},r=e=>{switch(e){case"high":return"high-priority";case"medium":return"medium-priority";case"low":return"low-priority";default:return"no-priority"}},p=e=>{e.innerHTML="";const t=document.createElement("h1");t.innerText="TODO Lists",e.appendChild(t);const i=document.createElement("button");i.innerText="Create New Project",i.classList.add("create-button"),e.appendChild(i),i.addEventListener("click",(()=>{d(),p(e)}));const o=document.createElement("ul");o.setAttribute("id","project-list"),e.appendChild(o),n.forEach((t=>{const s=document.createElement("li");s.classList.add("project");const d=document.createElement("div");d.classList.add("project-title"),d.innerText=t.name,s.append(d);const i=document.createElement("div");i.classList.add("project-counter"),i.innerText=`${t.taskList.length} todos`,s.append(i);const l=document.createElement("button");l.classList.add("project-view"),l.innerText="View",s.append(l),l.addEventListener("click",(()=>{a(e,t)}));const r=document.createElement("button");r.classList.add("project-delete"),r.innerText="Delete",s.append(r),r.addEventListener("click",(()=>{(e=>{n=n.filter((t=>t!==e)),c()})(t),p(e)})),o.appendChild(s)})),e.appendChild(o);const l=document.createElement("button");l.classList.add("home-reset"),l.innerText="Reset all",e.append(l),l.addEventListener("click",(()=>{n=[],localStorage.setItem(s,JSON.stringify(null)),d(),p(e)}))};console.log("webpack compiled to main.js");const m=document.querySelector("#content");(()=>{const c=JSON.parse(localStorage.getItem(s));c&&0!==c.length?n=c.map((n=>(n=>{let s=n.taskList.map((t=>(t=>e(t))(t)));return t(n.name,s)})(n))):(console.log("initialize project list"),n=[],d()),console.table(n)})(),p(m),console.log("end of index")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza09iak1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdE9iak1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZU1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdFBhZ2VNb2R1bGUuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Rhc2tQYWdlTW9kdWxlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9ob21lUGFnZU1vZHVsZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsidGFza0ZhY3RvcnkiLCJ0aXRsZSIsImRlc2MiLCJub3RlcyIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNoZWNrTGlzdCIsInJlc29sdmVkIiwiY29weSIsImNDb3B5IiwibWFwIiwiZWxlbSIsInByb2plY3RGYWN0b3J5IiwibmFtZSIsInRhc2tMaXN0IiwiYWRkVGFzayIsIm5ld1Rhc2siLCJwdXNoIiwiZGVsZXRlVGFzayIsInQiLCJpIiwibGVuZ3RoIiwic3BsaWNlIiwicHJvamVjdExpc3QiLCJzdG9yYWdlTmFtZSIsInN0b3JlUHJvamVjdExpc3QiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZU5ld1Byb2plY3QiLCJwIiwibG9hZFByb2plY3QiLCJjb250ZW50IiwicHJvamVjdCIsImlubmVySFRNTCIsInRvcENvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiYmFja2VyIiwiaW5uZXJUZXh0IiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvYWRIb21lIiwiaDEiLCJwcm9qZWN0TmFtZXIiLCJjcmVhdGVyIiwidUxpc3QiLCJwYXJlbnRJbmZvIiwiZm9yRWFjaCIsInJvdyIsImNyZWF0ZU1pbmlUYXNrUGFuZSIsInRhc2siLCJpbm5lckl0ZW0iLCJtaW5pVGFza0NvbnRlbnQiLCJleHBhbmRlciIsImFwcGVuZCIsImNyZWF0ZUZ1bGxUYXNrUGFuZSIsInRUaXRsZSIsInREYXRlIiwicHJpb3JpdHlDb2xvciIsIm1pbmkiLCJzaHJpbmtlciIsImRldGFpbHMiLCJwcmlvIiwiY0xpc3QiLCJjIiwiY2hlY2siLCJjQm94IiwiY1RleHQiLCJidXR0b25Sb3ciLCJlZGl0IiwidGFza0NvcHkiLCJsb2FkVGFzayIsImRlbEJ1dHRvbiIsInJlbW92ZSIsInJlc29sdmUiLCJpdGVtIiwicFRpdGxlIiwicFRhc2tzIiwicFZpZXciLCJwRGVsZXRlIiwiZmlsdGVyIiwiZGVsZXRlUHJvamVjdCIsInJlc2V0ZXIiLCJjb25zb2xlIiwibG9nIiwicXVlcnlTZWxlY3RvciIsImxvY2FsT2JqIiwicGFyc2UiLCJnZXRJdGVtIiwib2JqIiwidGFza0Zyb21PYmplY3QiLCJwcm9qZWN0RnJvbU9iamVjdCIsInRhYmxlIiwibG9hZFByb2plY3RMaXN0Il0sIm1hcHBpbmdzIjoibUJBR0EsTUFBTUEsRUFBYyxFQUFFQyxRQUNsQkMsT0FDQUMsUUFDQUMsVUFDQUMsV0FDQUMsWUFDQUMsZUE2Qk8sQ0FBQ04sUUFBT0MsT0FBTUMsUUFBT0MsVUFBU0MsV0FBVUMsWUFBV0MsV0FBVUMsS0FwQnZELEtBRVQsTUFBTUMsRUFBUUgsRUFBVUksS0FBS0MsR0FFbEIsQ0FBQ0EsRUFBSyxHQUFJQSxFQUFLLE1BYTFCLE9BVmdCWCxFQUFZLENBQ3hCQyxNQUFPQSxFQUNQQyxLQUFNQSxFQUNOQyxNQUFPQSxFQUNQQyxRQUFTLGNBQ1RDLFNBQVVBLEVBQ1ZDLFVBQVdHLEVBQ1hGLFNBQVVBLE9DN0JoQkssRUFBaUIsQ0FBQ0MsRUFBTUMsS0EwQm5CLENBQUNELE9BQU1DLFdBQVVDLFFBeEJSLEtBQ1osTUFBTUMsRUFBVWhCLEVBQVksQ0FDeEJDLE1BQU8sV0FDUEMsS0FBTSxlQUNOQyxNQUFPLGNBQ1BDLFFBQVMsbUJBQ1RDLFNBQVUsT0FDVkMsVUFBVyxDQUFDLENBQUMsbUJBQW1CLElBQ2hDQyxVQUFVLElBRWRPLEVBQVNHLEtBQUtELElBY2VFLFdBVmJDLElBQ2hCLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJTixFQUFTTyxPQUFRRCxJQUVoQyxHQUFHTixFQUFTTSxLQUFPRCxFQUFFLENBQ2pCTCxFQUFTUSxPQUFPRixFQUFHLEdBQ25CLFVDckJoQixJQUFJRyxFQUNKLE1BQU1DLEVBQWMsWUFzQmRDLEVBQW1CLEtBQ3JCQyxhQUFhQyxRQUFRSCxFQUFhSSxLQUFLQyxVQUFVTixLQWdCL0NPLEVBQW1CLEtBQ3JCLE1BQU1DLEVBQUluQixFQUFlLGNBQWUsSUFDeENtQixFQUFFaEIsVUFDRlEsRUFBWU4sS0FBS2MsR0FDakJOLEtDZEVPLEVBQWMsQ0FBQ0MsRUFBU0MsS0FDNUJELEVBQVFFLFVBQVksR0FHcEIsTUFBTUMsRUFBZUMsU0FBU0MsY0FBYyxPQUM1Q0YsRUFBYUcsYUFBYSxLQUFNLGdCQUNoQ04sRUFBUU8sWUFBWUosR0FHcEIsTUFBTUssRUFBU0osU0FBU0MsY0FBYyxVQUN0Q0csRUFBT0MsVUFBWSxlQUNuQkQsRUFBT0UsVUFBVUMsSUFBSSxlQUNyQlIsRUFBYUksWUFBWUMsR0FDekJBLEVBQU9JLGlCQUFpQixTQUFTLEtBQy9CQyxFQUFTYixNQUlYLE1BQU1jLEVBQUtWLFNBQVNDLGNBQWMsTUFDbENTLEVBQUdMLFVBQVlSLEVBQVFyQixLQUN2QnVCLEVBQWFJLFlBQVlPLEdBR3pCLE1BQU1DLEVBQWVYLFNBQVNDLGNBQWMsVUFDNUNVLEVBQWFOLFVBQVksaUJBQ3pCTSxFQUFhTCxVQUFVQyxJQUFJLGtCQUMzQlIsRUFBYUksWUFBWVEsR0FLekIsTUFBTUMsRUFBVVosU0FBU0MsY0FBYyxVQUN2Q1csRUFBUVAsVUFBWSxrQkFDcEJPLEVBQVFOLFVBQVVDLElBQUksaUJBQ3RCWCxFQUFRTyxZQUFZUyxHQUNwQkEsRUFBUUosaUJBQWlCLFNBQVMsS0FDaENYLEVBQVFuQixVQUNSVSxJQUNBTyxFQUFZQyxFQUFTQyxNQUl2QixNQUFNZ0IsRUFBUWIsU0FBU0MsY0FBYyxNQUNyQ1ksRUFBTVgsYUFBYSxLQUFNLGFBQ3pCTixFQUFRTyxZQUFZVSxHQUdwQixNQUFNcEMsRUFBV29CLEVBQVFwQixTQUNuQnFDLEVBQWEsQ0FBQ2xCLFVBQVNDLFdBRTdCcEIsRUFBU3NDLFNBQVFqQyxJQUVmLE1BQU1rQyxFQUFNaEIsU0FBU0MsY0FBYyxNQUNuQ1ksRUFBTVYsWUFBWWEsR0FHbEJDLEVBQW1CbkMsRUFBR2tDLEVBQUtGLE1BSTdCbEIsRUFBUU8sWUFBWVUsSUFHaEJJLEVBQXFCLENBQUNDLEVBQU01QyxFQUFNd0MsS0FDdEMsTUFBTUssRUFBWUMsRUFBZ0JGLEVBQU01QyxHQUdsQytDLEVBQVdyQixTQUFTQyxjQUFjLFVBU3hDLE9BUkFvQixFQUFTZixVQUFVQyxJQUFJLG9CQUN2QmMsRUFBU2hCLFVBQVksSUFDckJjLEVBQVVHLE9BQU9ELEdBQ2pCQSxFQUFTYixpQkFBaUIsU0FBUyxLQUNqQ2xDLEVBQUt3QixVQUFZLEdBQ2pCeUIsRUFBbUJMLEVBQU01QyxFQUFNd0MsTUFHMUJLLEdBR0hDLEVBQWtCLENBQUNGLEVBQU01QyxFQUFNd0MsS0FDbkMsTUFBTUssRUFBWW5CLFNBQVNDLGNBQWMsT0FDekNrQixFQUFVYixVQUFVQyxJQUFJLGFBQ3hCakMsRUFBS2dELE9BQU9ILEdBR1osTUFBTUssRUFBU3hCLFNBQVNDLGNBQWMsT0FDdEN1QixFQUFPbEIsVUFBVUMsSUFBSSxtQkFDckJpQixFQUFPbkIsVUFBWWEsRUFBS3RELE1BQ3hCdUQsRUFBVUcsT0FBT0UsR0FHakIsTUFBTUMsRUFBUXpCLFNBQVNDLGNBQWMsT0FXckMsT0FWQXdCLEVBQU1uQixVQUFVQyxJQUFJLGtCQUNwQmtCLEVBQU1wQixVQUFZYSxFQUFLbkQsUUFDdkJvRCxFQUFVRyxPQUFPRyxHQUdkUCxFQUFLaEQsU0FDTmlELEVBQVViLFVBQVVDLElBQUltQixFQUFjLFNBRXRDUCxFQUFVYixVQUFVQyxJQUFJbUIsRUFBY1IsRUFBS2xELFdBRXRDbUQsR0FHSEksRUFBcUIsQ0FBQ0wsRUFBTTVDLEVBQU13QyxLQUN0QyxNQUFNSyxFQUFZbkIsU0FBU0MsY0FBYyxPQUN6Q2tCLEVBQVViLFVBQVVDLElBQUksYUFDeEJqQyxFQUFLZ0QsT0FBT0gsR0FHWixNQUFNUSxFQUFPUCxFQUFnQkYsRUFBTUMsR0FHN0JTLEVBQVc1QixTQUFTQyxjQUFjLFVBQ3hDMkIsRUFBU3RCLFVBQVVDLElBQUksb0JBQ3ZCcUIsRUFBU3ZCLFVBQVksSUFDckJzQixFQUFLTCxPQUFPTSxHQUNaQSxFQUFTcEIsaUJBQWlCLFNBQVMsS0FDakNsQyxFQUFLd0IsVUFBWSxHQUNqQm1CLEVBQW1CQyxFQUFNNUMsTUFJM0IsTUFBTXVELEVBQVU3QixTQUFTQyxjQUFjLE9BQ3ZDNEIsRUFBUXZCLFVBQVVDLElBQUkscUJBQ3RCakMsRUFBS2dELE9BQU9PLEdBR1osTUFBTWhFLEVBQU9tQyxTQUFTQyxjQUFjLE9BQ3BDcEMsRUFBS3lDLFVBQVVDLElBQUksa0JBQ25CMUMsRUFBS3dDLFVBQVlhLEVBQUtyRCxLQUN0QmdFLEVBQVFQLE9BQU96RCxHQUdmLE1BQU1DLEVBQVFrQyxTQUFTQyxjQUFjLE9BQ3JDbkMsRUFBTXdDLFVBQVVDLElBQUksa0JBQ3BCekMsRUFBTXVDLFVBQVlhLEVBQUtwRCxNQUN2QitELEVBQVFQLE9BQU94RCxHQUdmLE1BQU1nRSxFQUFPOUIsU0FBU0MsY0FBYyxPQUNwQzZCLEVBQUt4QixVQUFVQyxJQUFJLGtCQUNoQlcsRUFBS2hELFNBQ040RCxFQUFLekIsVUFBWSw0QkFFakJ5QixFQUFLekIsVUFBWSxhQUFhYSxFQUFLbEQsV0FDckM2RCxFQUFRUCxPQUFPUSxHQUdmLE1BQU1DLEVBQVEvQixTQUFTQyxjQUFjLE1BQ3JDOEIsRUFBTXpCLFVBQVVDLElBQUksa0JBQ3BCc0IsRUFBUVAsT0FBT1MsR0FFZmIsRUFBS2pELFVBQVU4QyxTQUFRaUIsSUFFckIsTUFBTUMsRUFBUWpDLFNBQVNDLGNBQWMsTUFDckNnQyxFQUFNM0IsVUFBVUMsSUFBSSx1QkFDcEJ3QixFQUFNVCxPQUFPVyxHQUdiLE1BQU1DLEVBQU9sQyxTQUFTQyxjQUFjLFNBQ3BDaUMsRUFBS2hDLGFBQWEsT0FBUSxZQUMxQitCLEVBQU1YLE9BQU9ZLEdBS2IsTUFBTUMsRUFBUW5DLFNBQVNDLGNBQWMsS0FDckNrQyxFQUFNOUIsVUFBWTJCLEVBQUUsR0FDcEJDLEVBQU1YLE9BQU9hLE1BSWYsTUFBTUMsRUFBWXBDLFNBQVNDLGNBQWMsT0FDekNtQyxFQUFVOUIsVUFBVUMsSUFBSSx3QkFDeEJzQixFQUFRUCxPQUFPYyxHQUdmLE1BQU1DLEVBQU9yQyxTQUFTQyxjQUFjLFVBQ3BDb0MsRUFBSy9CLFVBQVVDLElBQUksa0JBQ25COEIsRUFBS2hDLFVBQVksWUFDakIrQixFQUFVZCxPQUFPZSxHQUVqQkEsRUFBSzdCLGlCQUFpQixTQUFTLEtBRVpVLEVBQUsvQyxPQ3hOVCxFQUFDeUIsRUFBU0MsRUFBU3FCLEVBQU1vQixLQUN0QzFDLEVBQVFFLFVBQVksR0FHdEIsTUFBTUMsRUFBZUMsU0FBU0MsY0FBYyxPQUM1Q0YsRUFBYUcsYUFBYSxLQUFNLGdCQUNoQ04sRUFBUU8sWUFBWUosR0FHcEIsTUFBTUssRUFBU0osU0FBU0MsY0FBYyxVQUN0Q0csRUFBT0MsVUFBWSxrQkFDbkJELEVBQU9FLFVBQVVDLElBQUksZUFDckJSLEVBQWFJLFlBQVlDLEdBQ3pCQSxFQUFPSSxpQkFBaUIsU0FBUyxLQUMvQmIsRUFBWUMsRUFBU0MsTUFJdkIsTUFBTWEsRUFBS1YsU0FBU0MsY0FBYyxNQUNsQ1MsRUFBR0wsVUFBWSxZQUNmTixFQUFhSSxZQUFZTyxJRHFNdkI2QixDQUFTekIsRUFBV2xCLFFBQVNrQixFQUFXakIsWUFJMUMsTUFBTTJDLEVBQVl4QyxTQUFTQyxjQUFjLFVBQ3pDdUMsRUFBVWxDLFVBQVVDLElBQUksb0JBQ3hCaUMsRUFBVW5DLFVBQVksY0FDdEIrQixFQUFVZCxPQUFPa0IsR0FDakJBLEVBQVVoQyxpQkFBaUIsU0FBUyxLQUVsQ2xDLEVBQUttRSxTQUNMM0IsRUFBV2pCLFFBQVFoQixXQUFXcUMsR0FDOUI5QixPQUlGLE1BQU1zRCxFQUFVMUMsU0FBU0MsY0FBYyxVQVl2QyxPQVhBeUMsRUFBUXBDLFVBQVVDLElBQUkscUJBQ3RCbUMsRUFBUXJDLFVBQVksZUFDcEIrQixFQUFVZCxPQUFPb0IsR0FDakJBLEVBQVFsQyxpQkFBaUIsU0FBUyxLQUVoQ1UsRUFBS2hELFVBQVcsRUFDaEJJLEVBQUt3QixVQUFZLEdBQ2pCeUIsRUFBbUJMLEVBQU01QyxFQUFNd0MsR0FDL0IxQixPQUdLK0IsR0FHSE8sRUFBaUIxRCxJQUNyQixPQUFPQSxHQUNMLElBQUssT0FDSCxNQUFPLGdCQUNULElBQUssU0FDSCxNQUFPLGtCQUNULElBQUssTUFDSCxNQUFPLGVBQ1QsUUFDRSxNQUFPLGdCRWhPUHlDLEVBQVdiLElBQ2JBLEVBQVFFLFVBQVksR0FHcEIsTUFBTVksRUFBS1YsU0FBU0MsY0FBYyxNQUNsQ1MsRUFBR0wsVUFBWSxhQUNmVCxFQUFRTyxZQUFZTyxHQUdwQixNQUFNRSxFQUFVWixTQUFTQyxjQUFjLFVBQ3ZDVyxFQUFRUCxVQUFZLHFCQUNwQk8sRUFBUU4sVUFBVUMsSUFBSSxpQkFDdEJYLEVBQVFPLFlBQVlTLEdBQ3BCQSxFQUFRSixpQkFBaUIsU0FBUyxLQUNoQ2YsSUFDQWdCLEVBQVNiLE1BSVgsTUFBTWlCLEVBQVFiLFNBQVNDLGNBQWMsTUFDckNZLEVBQU1YLGFBQWEsS0FBTSxnQkFDekJOLEVBQVFPLFlBQVlVLEdIbEJiM0IsRUd1Qks2QixTQUFRckIsSUFHbEIsTUFBTWlELEVBQU8zQyxTQUFTQyxjQUFjLE1BQ3BDMEMsRUFBS3JDLFVBQVVDLElBQUksV0FHbkIsTUFBTXFDLEVBQVM1QyxTQUFTQyxjQUFjLE9BQ3RDMkMsRUFBT3RDLFVBQVVDLElBQUksaUJBQ3JCcUMsRUFBT3ZDLFVBQVlYLEVBQUVsQixLQUNyQm1FLEVBQUtyQixPQUFPc0IsR0FHWixNQUFNQyxFQUFTN0MsU0FBU0MsY0FBYyxPQUN0QzRDLEVBQU92QyxVQUFVQyxJQUFJLG1CQUNyQnNDLEVBQU94QyxVQUFZLEdBQUdYLEVBQUVqQixTQUFTTyxlQUNqQzJELEVBQUtyQixPQUFPdUIsR0FHWixNQUFNQyxFQUFROUMsU0FBU0MsY0FBYyxVQUNyQzZDLEVBQU14QyxVQUFVQyxJQUFJLGdCQUNwQnVDLEVBQU16QyxVQUFZLE9BQ2xCc0MsRUFBS3JCLE9BQU93QixHQUNaQSxFQUFNdEMsaUJBQWlCLFNBQVMsS0FDOUJiLEVBQVlDLEVBQVNGLE1BSXZCLE1BQU1xRCxFQUFVL0MsU0FBU0MsY0FBYyxVQUN2QzhDLEVBQVF6QyxVQUFVQyxJQUFJLGtCQUN0QndDLEVBQVExQyxVQUFZLFNBQ3BCc0MsRUFBS3JCLE9BQU95QixHQUNaQSxFQUFRdkMsaUJBQWlCLFNBQVMsS0gzQ2xCLENBQUNkLElBQ25CUixFQUFjQSxFQUFZOEQsUUFBUTFFLEdBQVFBLElBQVNvQixJQUNuRE4sS0cwQ0k2RCxDQUFjdkQsR0FDZGUsRUFBU2IsTUFJWGlCLEVBQU1WLFlBQVl3QyxNQUlwQi9DLEVBQVFPLFlBQVlVLEdBR3BCLE1BQU1xQyxFQUFVbEQsU0FBU0MsY0FBYyxVQUN2Q2lELEVBQVE1QyxVQUFVQyxJQUFJLGNBQ3RCMkMsRUFBUTdDLFVBQVksWUFDcEJULEVBQVEwQixPQUFPNEIsR0FDZkEsRUFBUTFDLGlCQUFpQixTQUFTLEtIOUVsQ3RCLEVBQWMsR0FDZEcsYUFBYUMsUUFBUUgsRUFBYUksS0FBS0MsVUFBVSxPRytFL0NDLElBQ0FnQixFQUFTYixPQzNHZnVELFFBQVFDLElBQUksK0JBRVosTUFBTXhELEVBQVVJLFNBQVNxRCxjQUFjLFlKRmYsTUFFcEIsTUFBTUMsRUFBVy9ELEtBQUtnRSxNQUFNbEUsYUFBYW1FLFFBQVFyRSxJQUk3Q21FLEdBQWdDLElBQXBCQSxFQUFTdEUsT0FPckJFLEVBQWNvRSxFQUFTakYsS0FBSUMsR0RhVCxDQUFDbUYsSUFDdkIsSUFBSWhGLEVBQVdnRixFQUFJaEYsU0FBU0osS0FBSUMsR0RRYm1GLElBQ1I5RixFQUFZOEYsR0NUZUMsQ0FBZXBGLEtBR3JELE9BRmNDLEVBQWVrRixFQUFJakYsS0FBTUMsSUNmQWtGLENBQWtCckYsTUFOckQ2RSxRQUFRQyxJQUFJLDJCQUNabEUsRUFBYyxHQUNkTyxLQU1KMEQsUUFBUVMsTUFBTTFFLElJVmxCMkUsR0FFQXBELEVBQVNiLEdBQ1R1RCxRQUFRQyxJQUFJLGlCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2NvbnN0cnVjdG9yIGFuZCBoZWxwZXIgZnVuY3Rpb25zIGZvciB0YXNrL3RvZG8gb2JqZWN0c1xuaW1wb3J0IHtmb3JtYXR9IGZyb20gJ2RhdGUtZm5zJztcblxuY29uc3QgdGFza0ZhY3RvcnkgPSAoe3RpdGxlLFxuICAgIGRlc2MsXG4gICAgbm90ZXMsXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBjaGVja0xpc3QsXG4gICAgcmVzb2x2ZWR9KSA9PntcbiAgICAvKmNvbnN0IHRpdGxlID0gJ05ldyBUYXNrJztcbiAgICBjb25zdCBkZXNjID0gJ0EgZGVmYXVsdCB0YXNrIHRlbXBsYXRlJztcbiAgICBjb25zdCBub3RlcyA9ICdibGFuayBub3Rlcyc7XG4gICAgY29uc3QgZHVlRGF0ZSA9ICdzZXQgdGhpcyBzb21laG93JztcbiAgICBjb25zdCBwcmlvcml0eSA9IDA7XG4gICAgY29uc3QgY2hlY2tsaXN0ID0gbnVsbDtcbiAgICBjb25zdCByZXNvbHZlZCA9IGZhbHNlOyovXG5cbiAgICBjb25zdCBjb3B5ID0gKCkgPT57XG5cbiAgICAgICAgY29uc3QgY0NvcHkgPSBjaGVja0xpc3QubWFwKChlbGVtKT0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBbZWxlbVswXSwgZWxlbVsxXV07XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgbmV3VGFzayA9IHRhc2tGYWN0b3J5KHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIGRlc2M6IGRlc2MsXG4gICAgICAgICAgICBub3Rlczogbm90ZXMsXG4gICAgICAgICAgICBkdWVEYXRlOiAnYmFkIGZvciBub3cnLFxuICAgICAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5LFxuICAgICAgICAgICAgY2hlY2tMaXN0OiBjQ29weSxcbiAgICAgICAgICAgIHJlc29sdmVkOiByZXNvbHZlZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ld1Rhc2s7XG4gICAgfVxuXG4gICAgcmV0dXJuIHt0aXRsZSwgZGVzYywgbm90ZXMsIGR1ZURhdGUsIHByaW9yaXR5LCBjaGVja0xpc3QsIHJlc29sdmVkLCBjb3B5fTtcbn1cblxuLy9jb252ZXJ0IGEgZ2VuZXJpYyBvYmplY3QgdG8gYSB0YXNrXG5jb25zdCB0YXNrRnJvbU9iamVjdCA9IG9iaiA9PntcbiAgICBsZXQgdGFzayA9IHRhc2tGYWN0b3J5KG9iaik7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5cbmV4cG9ydCB7dGFza0ZhY3RvcnksIHRhc2tGcm9tT2JqZWN0fTsiLCJpbXBvcnQgeyB0YXNrRmFjdG9yeSwgdGFza0Zyb21PYmplY3QgfSBmcm9tIFwiLi90YXNrT2JqTW9kdWxlXCI7XG5cbi8vY29uc3RydWN0b3IgYW5kIGhlbHBlciBmdW5jdGlvbnMgZm9yIHByb2plY3Qgb2JqZWN0c1xuY29uc3QgcHJvamVjdEZhY3RvcnkgPSAobmFtZSwgdGFza0xpc3QpID0+e1xuXG4gICAgY29uc3QgYWRkVGFzayA9ICgpPT57XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB0YXNrRmFjdG9yeSh7XG4gICAgICAgICAgICB0aXRsZTogJ05ldyBUYXNrJywgXG4gICAgICAgICAgICBkZXNjOiAnQSBibGFuayB0YXNrJywgXG4gICAgICAgICAgICBub3RlczogJ2JsYW5rIG5vdGVzJywgXG4gICAgICAgICAgICBkdWVEYXRlOiAnc2V0IHRoaXMgc29tZWhvdycsIFxuICAgICAgICAgICAgcHJpb3JpdHk6ICdub25lJywgXG4gICAgICAgICAgICBjaGVja0xpc3Q6IFtbJ3NhbXBsZSBjaGVja2JveCcsIHRydWVdXSwgXG4gICAgICAgICAgICByZXNvbHZlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRhc2tMaXN0LnB1c2gobmV3VGFzayk7XG4gICAgfVxuXG4gICAgLy9kZWxldGUgYSBwcm9qZWN0IGZyb20gdGhlIGxpc3RcbiAgICBjb25zdCBkZWxldGVUYXNrID0gKHQpID0+e1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFza0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRhc2tMaXN0W2ldID09PSB0KXtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge25hbWUsIHRhc2tMaXN0LCBhZGRUYXNrLCBkZWxldGVUYXNrfTtcbn1cblxuLy9jb252ZXJ0IGEgZ2VuZXJpYyBvYmplY3QgdG8gYSBwcm9qZWN0XG5jb25zdCBwcm9qZWN0RnJvbU9iamVjdCA9IChvYmopID0+e1xuICAgIGxldCB0YXNrTGlzdCA9IG9iai50YXNrTGlzdC5tYXAoZWxlbT0+dGFza0Zyb21PYmplY3QoZWxlbSkpO1xuICAgIGxldCBwcm9qZWN0ID0gcHJvamVjdEZhY3Rvcnkob2JqLm5hbWUsIHRhc2tMaXN0KTtcblxuICAgIHJldHVybiBwcm9qZWN0O1xufTtcblxuZXhwb3J0IHtwcm9qZWN0RmFjdG9yeSwgcHJvamVjdEZyb21PYmplY3R9OyIsImltcG9ydCB7cHJvamVjdEZhY3RvcnksIHByb2plY3RGcm9tT2JqZWN0fSBmcm9tIFwiLi9wcm9qZWN0T2JqTW9kdWxlXCI7XG5cbi8vaG9sZCB0aGUgcHJvamVjdCBsaXN0IGFuZCBoYW5kbGUgbG9jYWxzdG9yYWdlIGZ1bmN0aW9uc1xubGV0IHByb2plY3RMaXN0O1xuY29uc3Qgc3RvcmFnZU5hbWUgPSAnT2Rpbi1Ub2RvJztcblxuLy9sb2FkIHRoZSBwcm9qZWN0IGxpc3QgZnJvbSBsb2NhbCBzdG9yYWdlXG5jb25zdCBsb2FkUHJvamVjdExpc3QgPSAoKSA9PntcbiAgICAvL3RyeSB0byBsb2FkIGZyb20gc3RvcmFnZVxuICAgIGNvbnN0IGxvY2FsT2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlTmFtZSkpO1xuICAgIC8vY29uc29sZS50YWJsZShsb2NhbE9iaik7XG5cbiAgICAvL2lmIG5vIHJlc3VsdHMgZm91bmQsIGNyZWF0ZSBhIGRlZmF1bHQgb25lXG4gICAgaWYoIWxvY2FsT2JqIHx8IGxvY2FsT2JqLmxlbmd0aCA9PT0gMCl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0aWFsaXplIHByb2plY3QgbGlzdCcpO1xuICAgICAgICBwcm9qZWN0TGlzdCA9IFtdO1xuICAgICAgICBjcmVhdGVOZXdQcm9qZWN0KCk7XG4gICAgfVxuICAgIC8vbG9hZCBleGlzdGluZyBwcm9qZWN0LCBjb252ZXJ0IGdlbmVyaWMgb2JqZWN0cyB0byBwcm9qZWN0cy90YXNrcy9jaGVja2xpc3RzXG4gICAgZWxzZXtcbiAgICAgICAgcHJvamVjdExpc3QgPSBsb2NhbE9iai5tYXAoZWxlbSA9PiBwcm9qZWN0RnJvbU9iamVjdChlbGVtKSk7XG4gICAgfVxuICAgIGNvbnNvbGUudGFibGUocHJvamVjdExpc3QpO1xufVxuXG4vL3N0b3JlIHRoZSBwcm9qZWN0IGxpc3QgaW4gbG9jYWwgc3RvcmFnZVxuY29uc3Qgc3RvcmVQcm9qZWN0TGlzdCA9ICgpID0+e1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VOYW1lLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgIC8vY29uc29sZS5sb2cocHJvamVjdExpc3QpO1xufVxuXG4vL3Jlc2V0IHRoZSBsb2NhbCBzdG9yYWdlXG5jb25zdCByZXNldFN0b3JhZ2UgPSAoKSA9PntcbiAgICBwcm9qZWN0TGlzdCA9IFtdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VOYW1lLCBKU09OLnN0cmluZ2lmeShudWxsKSk7XG59XG5cbi8vbGV0IHRoZSBwcm9qZWN0IGhhdmUgYWNjZXNzIHRvIHByb2plY3QgbGlzdFxuY29uc3QgZ2V0UHJvamVjdExpc3QgPSAoKSA9PntcbiAgICByZXR1cm4gcHJvamVjdExpc3Q7XG59XG5cbi8vYWRkIGEgYmxhbmsgcHJvamVjdCB0byB0aGUgbGlzdFxuY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9ICgpID0+e1xuICAgIGNvbnN0IHAgPSBwcm9qZWN0RmFjdG9yeShcIk5ldyBQcm9qZWN0XCIsIFtdKTtcbiAgICBwLmFkZFRhc2soKTtcbiAgICBwcm9qZWN0TGlzdC5wdXNoKHApO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbn1cblxuLy9kZWxldGUgYSBwcm9qZWN0IGZyb20gdGhlIGxpc3RcbmNvbnN0IGRlbGV0ZVByb2plY3QgPSAocCkgPT57XG4gICAgcHJvamVjdExpc3QgPSBwcm9qZWN0TGlzdC5maWx0ZXIoKGVsZW0pPT4gZWxlbSAhPT0gcCk7XG4gICAgc3RvcmVQcm9qZWN0TGlzdCgpO1xufVxuXG5leHBvcnQge2xvYWRQcm9qZWN0TGlzdCwgc3RvcmVQcm9qZWN0TGlzdCwgcmVzZXRTdG9yYWdlLCBnZXRQcm9qZWN0TGlzdCwgY3JlYXRlTmV3UHJvamVjdCwgZGVsZXRlUHJvamVjdH07XG4iLCJpbXBvcnQgeyBsb2FkSG9tZSB9IGZyb20gXCIuL2hvbWVQYWdlTW9kdWxlXCI7XG5pbXBvcnQgeyBzdG9yZVByb2plY3RMaXN0IH0gZnJvbSBcIi4vc3RvcmFnZU1vZHVsZVwiO1xuaW1wb3J0IHsgbG9hZFRhc2sgfSBmcm9tIFwiLi90YXNrUGFnZU1vZHVsZVwiO1xuXG4vL21vZHVsZSBmb3IgZGlzcGxheWluZyB0YXNrcyB3aXRoaW4gYSBwcm9qZWN0XG5cbi8vc2FtcGxlIGh0bWwgc3RydWN0dXJlIGZvciBwYWdlXG5jb25zdCBodG1sQ29udGVudD1gPGRpdiBpZD1cImhlYWRlclwiPlxuPGRpdj5CYWNrPC9kaXY+XG48aDE+UHJvamVjdCBOYW1lPC9oMT5cbjxkaXY+UmVuYW1lPC9kaXY+XG48L2Rpdj5cbjxkaXYgY2xhc3M9XCJjcmVhdGUtYnV0dG9uXCI+Q3JlYXRlIE5ldyBUYXNrPC9kaXY+XG48dWwgaWQ9XCJ0YXNrLWxpc3RcIj5cbjxsaSBjbGFzcz1cInRhc2tcIj5cbiAgPGRpdiBjbGFzcyA9XCJ0YXNrLW1pbmltaXplXCI+XjwvZGl2PlxuICA8ZGl2PnVwZGF0ZTwvZGl2PlxuICA8ZGl2IGNsYXNzID1cInRhc2stdGl0bGVcIj5UYXNrIDE8L2Rpdj5cbiAgPGRpdiBjbGFzcyA9XCJ0YXNrLWRlc2NcIj5PbmUgdGFzayBkZXNjcmlwdGlvbjwvZGl2PlxuICA8ZGl2PmVkaXQgZGV0YWlsczwvZGl2PlxuICA8ZGl2PmFkZGl0aW9uYWwgbm90ZXM8L2Rpdj5cbiAgPGRpdj5kZWxldGU8L2Rpdj5cbiAgPGRpdj5wcmlvcml0eTwvZGl2PlxuICA8ZGl2PmRlYWRsaW5lPC9kaXY+XG4gIDxkaXY+YWRkIHRvIGNoZWNrbGlzdDwvZGl2PlxuICA8bGkgY2xhc3MgPVwiY2hlY2stbGlzdFwiPlxuICAgIDx1bD5jaGVjazE8L3VsPlxuICAgIDx1bD5jaGVjazI8L3VsPlxuICA8L2xpPlxuPC9saT5cbjwvdWw+YDtcblxuLy91c2UgdGhlIGN1cnJlbnQgcHJvamVjdCB0byBhc3NlbWJsZSBhbiBodG1sIHBhZ2VcbmNvbnN0IGxvYWRQcm9qZWN0ID0gKGNvbnRlbnQsIHByb2plY3QpID0+e1xuICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gIC8vdG9wIGVsZW1lbnQgY29udGFpbmVyXG4gIGNvbnN0IHRvcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0b3BDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LWluZm8nKTtcbiAgY29udGVudC5hcHBlbmRDaGlsZCh0b3BDb250YWluZXIpO1xuXG4gIC8vYmFjayBidXR0b25cbiAgY29uc3QgYmFja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJhY2tlci5pbm5lclRleHQgPSAnQmFjayB0byBIb21lJztcbiAgYmFja2VyLmNsYXNzTGlzdC5hZGQoJ2JhY2stYnV0dG9uJyk7XG4gIHRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChiYWNrZXIpO1xuICBiYWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICBsb2FkSG9tZShjb250ZW50KTtcbiAgfSlcblxuICAvL2gxXG4gIGNvbnN0IGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgaDEuaW5uZXJUZXh0ID0gcHJvamVjdC5uYW1lO1xuICB0b3BDb250YWluZXIuYXBwZW5kQ2hpbGQoaDEpO1xuXG4gIC8vcmVuYW1lIGJ1dHRvblxuICBjb25zdCBwcm9qZWN0TmFtZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgcHJvamVjdE5hbWVyLmlubmVyVGV4dCA9ICdSZW5hbWUgUHJvamVjdCc7XG4gIHByb2plY3ROYW1lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXJlbmFtZScpO1xuICB0b3BDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVyKTtcbiAgLy90b2RvOiBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gcmVuYW1lIHByb2plY3RcblxuXG4gIC8vY3JlYXRlIGJ1dHRvblxuICBjb25zdCBjcmVhdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGNyZWF0ZXIuaW5uZXJUZXh0ID0gJ0NyZWF0ZSBOZXcgVGFzayc7XG4gIGNyZWF0ZXIuY2xhc3NMaXN0LmFkZCgnY3JlYXRlLWJ1dHRvbicpO1xuICBjb250ZW50LmFwcGVuZENoaWxkKGNyZWF0ZXIpO1xuICBjcmVhdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICBwcm9qZWN0LmFkZFRhc2soKTtcbiAgICBzdG9yZVByb2plY3RMaXN0KCk7XG4gICAgbG9hZFByb2plY3QoY29udGVudCwgcHJvamVjdCk7XG4gIH0pO1xuXG4gIC8vdWxcbiAgY29uc3QgdUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICB1TGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Rhc2stbGlzdCcpO1xuICBjb250ZW50LmFwcGVuZENoaWxkKHVMaXN0KTtcblxuICAvL2xpIGVsZW1lbnRzXG4gIGNvbnN0IHRhc2tMaXN0ID0gcHJvamVjdC50YXNrTGlzdDtcbiAgY29uc3QgcGFyZW50SW5mbyA9IHtjb250ZW50LCBwcm9qZWN0fTtcbiAgLy9jb25zb2xlLmxvZyhwcm9qZWN0TGlzdCk7XG4gIHRhc2tMaXN0LmZvckVhY2godCA9PiB7XG4gICAgLy9saSBlbGVtZW50XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICB1TGlzdC5hcHBlbmRDaGlsZChyb3cpO1xuXG4gICAgLy9taW5pLXBhbmVcbiAgICBjcmVhdGVNaW5pVGFza1BhbmUodCwgcm93LCBwYXJlbnRJbmZvKTtcbiAgfSk7XG5cbiAgLy9hcHBlbmQgbGlzdCB0byBjb250ZW50XG4gIGNvbnRlbnQuYXBwZW5kQ2hpbGQodUxpc3QpO1xufVxuXG5jb25zdCBjcmVhdGVNaW5pVGFza1BhbmUgPSAodGFzaywgZWxlbSwgcGFyZW50SW5mbyk9PntcbiAgY29uc3QgaW5uZXJJdGVtID0gbWluaVRhc2tDb250ZW50KHRhc2ssIGVsZW0pO1xuXG4gIC8vZXhwYW5kXG4gIGNvbnN0IGV4cGFuZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGV4cGFuZGVyLmNsYXNzTGlzdC5hZGQoJ21pbmktdGFzay1leHBhbmQnKTtcbiAgZXhwYW5kZXIuaW5uZXJUZXh0ID0gJz4nO1xuICBpbm5lckl0ZW0uYXBwZW5kKGV4cGFuZGVyKTtcbiAgZXhwYW5kZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgIGVsZW0uaW5uZXJIVE1MID0gJyc7XG4gICAgY3JlYXRlRnVsbFRhc2tQYW5lKHRhc2ssIGVsZW0sIHBhcmVudEluZm8pO1xuICB9KTtcblxuICByZXR1cm4gaW5uZXJJdGVtO1xufTtcblxuY29uc3QgbWluaVRhc2tDb250ZW50ID0gKHRhc2ssIGVsZW0sIHBhcmVudEluZm8pID0+IHtcbiAgY29uc3QgaW5uZXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlubmVySXRlbS5jbGFzc0xpc3QuYWRkKCdtaW5pLXRhc2snKTtcbiAgZWxlbS5hcHBlbmQoaW5uZXJJdGVtKTtcblxuICAvL3RpdGxlXG4gIGNvbnN0IHRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0VGl0bGUuY2xhc3NMaXN0LmFkZCgnbWluaS10YXNrLXRpdGxlJyk7XG4gIHRUaXRsZS5pbm5lclRleHQgPSB0YXNrLnRpdGxlO1xuICBpbm5lckl0ZW0uYXBwZW5kKHRUaXRsZSk7XG5cbiAgLy9kdWUgZGF0ZVxuICBjb25zdCB0RGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0RGF0ZS5jbGFzc0xpc3QuYWRkKCdtaW5pLXRhc2stZGF0ZScpO1xuICB0RGF0ZS5pbm5lclRleHQgPSB0YXNrLmR1ZURhdGU7XG4gIGlubmVySXRlbS5hcHBlbmQodERhdGUpO1xuXG4gIC8vc2V0IHByaW9yaXR5IGNvbG9yXG4gIGlmKHRhc2sucmVzb2x2ZWQpXG4gICAgaW5uZXJJdGVtLmNsYXNzTGlzdC5hZGQocHJpb3JpdHlDb2xvcignbm9uZScpKTtcbiAgZWxzZVxuICAgIGlubmVySXRlbS5jbGFzc0xpc3QuYWRkKHByaW9yaXR5Q29sb3IodGFzay5wcmlvcml0eSkpO1xuXG4gIHJldHVybiBpbm5lckl0ZW07XG59O1xuXG5jb25zdCBjcmVhdGVGdWxsVGFza1BhbmUgPSAodGFzaywgZWxlbSwgcGFyZW50SW5mbyk9PntcbiAgY29uc3QgaW5uZXJJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGlubmVySXRlbS5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2snKTtcbiAgZWxlbS5hcHBlbmQoaW5uZXJJdGVtKTtcblxuICAvL2NvcHkgdGhlIGNvbnRlbnQgb2YgdGhlIG1pbmktdGFzayBiYXJcbiAgY29uc3QgbWluaSA9IG1pbmlUYXNrQ29udGVudCh0YXNrLCBpbm5lckl0ZW0pO1xuXG4gIC8vc2hyaW5rXG4gIGNvbnN0IHNocmlua2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIHNocmlua2VyLmNsYXNzTGlzdC5hZGQoJ21pbmktdGFzay1leHBhbmQnKTtcbiAgc2hyaW5rZXIuaW5uZXJUZXh0ID0gJ14nO1xuICBtaW5pLmFwcGVuZChzaHJpbmtlcik7XG4gIHNocmlua2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICBlbGVtLmlubmVySFRNTCA9ICcnO1xuICAgIGNyZWF0ZU1pbmlUYXNrUGFuZSh0YXNrLCBlbGVtKTtcbiAgfSk7XG5cbiAgLy9leHBhbmRlZCBkZXRhaWxzXG4gIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGV0YWlscy5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stZGV0YWlscycpO1xuICBlbGVtLmFwcGVuZChkZXRhaWxzKTtcblxuICAvL2Rlc2NyaXB0aW9uXG4gIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGVzYy5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stdGV4dCcpO1xuICBkZXNjLmlubmVyVGV4dCA9IHRhc2suZGVzYztcbiAgZGV0YWlscy5hcHBlbmQoZGVzYyk7XG5cbiAgLy9ub3Rlc1xuICBjb25zdCBub3RlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBub3Rlcy5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stdGV4dCcpO1xuICBub3Rlcy5pbm5lclRleHQgPSB0YXNrLm5vdGVzO1xuICBkZXRhaWxzLmFwcGVuZChub3Rlcyk7XG5cbiAgLy9wcmlvcml0eVxuICBjb25zdCBwcmlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHByaW8uY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLXRleHQnKTtcbiAgaWYodGFzay5yZXNvbHZlZClcbiAgICBwcmlvLmlubmVyVGV4dCA9IGBQcmlvcml0eTogbm9uZSAocmVzb2x2ZWQpYDtcbiAgZWxzZVxuICAgIHByaW8uaW5uZXJUZXh0ID0gYFByaW9yaXR5OiAke3Rhc2sucHJpb3JpdHl9YDtcbiAgZGV0YWlscy5hcHBlbmQocHJpbyk7XG5cbiAgLy9jaGVja2xpc3RcbiAgY29uc3QgY0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICBjTGlzdC5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stbGlzdCcpO1xuICBkZXRhaWxzLmFwcGVuZChjTGlzdCk7XG5cbiAgdGFzay5jaGVja0xpc3QuZm9yRWFjaChjPT57XG4gICAgLy9vdXRlciBjb250YWluZXJcbiAgICBjb25zdCBjaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgY2hlY2suY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLWxpc3QtaXRlbScpO1xuICAgIGNMaXN0LmFwcGVuZChjaGVjayk7XG5cbiAgICAvL2NoZWNrYm94XG4gICAgY29uc3QgY0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgY0JveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICBjaGVjay5hcHBlbmQoY0JveCk7XG4gICAgLy90b2RvOiBhZGQgYW4gZXZlbnQgd2hlbiB0b2dnbGVkXG4gICAgLy91cGRhdGUgdWkgYW5kIHNhdmUsIGJ1dCBkbyBub3QgcmVmcmVzaCB3aG9sZSBwYWdlXG5cbiAgICAvL3RleHQgZm9yIGNoZWNrYm94XG4gICAgY29uc3QgY1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY1RleHQuaW5uZXJUZXh0ID0gY1swXTtcbiAgICBjaGVjay5hcHBlbmQoY1RleHQpO1xuICB9KTtcblxuICAvL2J1dHRvbnNcbiAgY29uc3QgYnV0dG9uUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGJ1dHRvblJvdy5jbGFzc0xpc3QuYWRkKCdmdWxsLXRhc2stYnV0dG9uLXJvdycpO1xuICBkZXRhaWxzLmFwcGVuZChidXR0b25Sb3cpO1xuXG4gIC8vZWRpdCBidXR0b25cbiAgY29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBlZGl0LmNsYXNzTGlzdC5hZGQoJ2Z1bGwtdGFzay1lZGl0Jyk7XG4gIGVkaXQuaW5uZXJUZXh0ID0gJ0VkaXQgVGFzayc7XG4gIGJ1dHRvblJvdy5hcHBlbmQoZWRpdCk7XG4gIC8vdG9kbzogYWRkIGNsaWNrIGV2ZW50LCBnbyB0byBlZGl0IHBhZ2VcbiAgZWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgIC8vY29weSB0aGUgdGFza1xuICAgIGNvbnN0IHRhc2tDb3B5ID0gdGFzay5jb3B5KCk7XG4gICAgbG9hZFRhc2socGFyZW50SW5mby5jb250ZW50LCBwYXJlbnRJbmZvLnByb2plY3QsIHRhc2ssIHRhc2tDb3B5KTtcbiAgfSk7XG5cbiAgLy9kZWxldGUgYnV0dG9uXG4gIGNvbnN0IGRlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBkZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLWRlbGV0ZScpO1xuICBkZWxCdXR0b24uaW5uZXJUZXh0ID0gJ0RlbGV0ZSBUYXNrJztcbiAgYnV0dG9uUm93LmFwcGVuZChkZWxCdXR0b24pO1xuICBkZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICAvL2Nhbm5vdCByZWZyZXNoIGJlY2F1c2Ugbm8gcmVmZXJlbmNlIHRvIHRoZSBwcm9qZWN0IGhlcmVcbiAgICBlbGVtLnJlbW92ZSgpO1xuICAgIHBhcmVudEluZm8ucHJvamVjdC5kZWxldGVUYXNrKHRhc2spO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgfSk7XG5cbiAgLy9yZXNvbHZlIGJ1dHRvblxuICBjb25zdCByZXNvbHZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIHJlc29sdmUuY2xhc3NMaXN0LmFkZCgnZnVsbC10YXNrLXJlc29sdmUnKTtcbiAgcmVzb2x2ZS5pbm5lclRleHQgPSAnUmVzb2x2ZSBUYXNrJztcbiAgYnV0dG9uUm93LmFwcGVuZChyZXNvbHZlKTtcbiAgcmVzb2x2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgIC8vY2Fubm90IHJlZnJlc2ggYmVjYXVzZSBubyByZWZlcmVuY2UgdG8gdGhlIHByb2plY3QgaGVyZVxuICAgIHRhc2sucmVzb2x2ZWQgPSB0cnVlO1xuICAgIGVsZW0uaW5uZXJIVE1MID0gJyc7XG4gICAgY3JlYXRlRnVsbFRhc2tQYW5lKHRhc2ssIGVsZW0sIHBhcmVudEluZm8pO1xuICAgIHN0b3JlUHJvamVjdExpc3QoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGlubmVySXRlbTtcbn1cblxuY29uc3QgcHJpb3JpdHlDb2xvciA9IChwcmlvcml0eSk9PntcbiAgc3dpdGNoKHByaW9yaXR5KXtcbiAgICBjYXNlICdoaWdoJzogXG4gICAgICByZXR1cm4gJ2hpZ2gtcHJpb3JpdHknO1xuICAgIGNhc2UgJ21lZGl1bSc6XG4gICAgICByZXR1cm4gJ21lZGl1bS1wcmlvcml0eSc7XG4gICAgY2FzZSAnbG93JzpcbiAgICAgIHJldHVybiAnbG93LXByaW9yaXR5JztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICduby1wcmlvcml0eSc7XG4gIH1cbn1cblxuZXhwb3J0IHtsb2FkUHJvamVjdH07IiwiaW1wb3J0IHsgc3RvcmVQcm9qZWN0TGlzdCB9IGZyb20gXCIuL3N0b3JhZ2VNb2R1bGVcIjtcbmltcG9ydCB7bG9hZFByb2plY3R9IGZyb20gXCIuL3Byb2plY3RQYWdlTW9kdWxlLmpzXCI7XG5cbmNvbnN0IGxvYWRUYXNrID0gKGNvbnRlbnQsIHByb2plY3QsIHRhc2ssIHRhc2tDb3B5KSA9PntcbiAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gIC8vdG9wIGVsZW1lbnQgY29udGFpbmVyXG4gIGNvbnN0IHRvcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0b3BDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LWluZm8nKTtcbiAgY29udGVudC5hcHBlbmRDaGlsZCh0b3BDb250YWluZXIpO1xuXG4gIC8vYmFjayBidXR0b25cbiAgY29uc3QgYmFja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGJhY2tlci5pbm5lclRleHQgPSAnQmFjayB0byBQcm9qZWN0JztcbiAgYmFja2VyLmNsYXNzTGlzdC5hZGQoJ2JhY2stYnV0dG9uJyk7XG4gIHRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChiYWNrZXIpO1xuICBiYWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICBsb2FkUHJvamVjdChjb250ZW50LCBwcm9qZWN0KTtcbiAgfSlcblxuICAvL2gxXG4gIGNvbnN0IGgxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDEnKTtcbiAgaDEuaW5uZXJUZXh0ID0gJ0VkaXQgVGFzayc7XG4gIHRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChoMSk7XG59O1xuXG5leHBvcnQge2xvYWRUYXNrfTsiLCJpbXBvcnQgeyByZXNldFN0b3JhZ2UsIGdldFByb2plY3RMaXN0LCBjcmVhdGVOZXdQcm9qZWN0LCBkZWxldGVQcm9qZWN0fSBmcm9tIFwiLi9zdG9yYWdlTW9kdWxlXCI7XG5pbXBvcnQgeyBsb2FkUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RQYWdlTW9kdWxlXCI7XG5cbi8vbW9kdWxlIGZvciBkaXNwbGF5aW5nIHByb2plY3RzIG9uIGEgbWFpbiBwYWdlXG5cbi8vc2FtZXBsZSBodG1sIHN0cnVjdHVyZVxuY29uc3QgaHRtbENvbnRlbnQ9YDxoMT5UT0RPIExpc3RzPC9oMT5cbjxkaXYgY2xhc3M9XCJjcmVhdGUtYnV0dG9uXCI+Q3JlYXRlIE5ldyBQcm9qZWN0PC9kaXY+XG48dWwgaWQ9XCJwcm9qZWN0LWxpc3RcIj5cbiAgPGxpIGNsYXNzPVwicHJvamVjdFwiPlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC10aXRsZVwiPlByb2plY3QgMTwvZGl2PlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC1jb3VudGVyXCI+MjIgdG9kb3M8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3Qtdmlld1wiPlZpZXc8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3QtZGVsZXRlXCI+RGVsZXRlPC9kaXY+XG4gIDwvbGk+XG4gIDxsaSBjbGFzcz1cInByb2plY3RcIj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3QtdGl0bGVcIj5Qcm9qZWN0IDE8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3QtY291bnRlclwiPjIyIHRvZG9zPC9kaXY+XG4gICAgPGRpdiBjbGFzcyA9XCJwcm9qZWN0LXZpZXdcIj5WaWV3PC9kaXY+XG4gICAgPGRpdiBjbGFzcyA9XCJwcm9qZWN0LWRlbGV0ZVwiPkRlbGV0ZTwvZGl2PlxuICA8L2xpPlxuICA8bGkgY2xhc3M9XCJwcm9qZWN0XCI+XG4gICAgPGRpdiBjbGFzcyA9XCJwcm9qZWN0LXRpdGxlXCI+UHJvamVjdCAxPC9kaXY+XG4gICAgPGRpdiBjbGFzcyA9XCJwcm9qZWN0LWNvdW50ZXJcIj4yMiB0b2RvczwvZGl2PlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC12aWV3XCI+VmlldzwvZGl2PlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC1kZWxldGVcIj5EZWxldGU8L2Rpdj5cbiAgPC9saT5cbiAgPGxpIGNsYXNzPVwicHJvamVjdFwiPlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC10aXRsZVwiPlByb2plY3QgMTwvZGl2PlxuICAgIDxkaXYgY2xhc3MgPVwicHJvamVjdC1jb3VudGVyXCI+MjIgdG9kb3M8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3Qtdmlld1wiPlZpZXc8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzID1cInByb2plY3QtZGVsZXRlXCI+RGVsZXRlPC9kaXY+XG4gIDwvbGk+XG48L3VsPmA7XG5cbi8vZ2V0IHRoZSBjdXJyZW50IHByb2plY3QgbGlzdCBhbmQgYXNzZW1ibGUgYW4gaHRtbCBwYWdlXG5jb25zdCBsb2FkSG9tZSA9IGNvbnRlbnQgPT57XG4gICAgY29udGVudC5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vaDFcbiAgICBjb25zdCBoMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgaDEuaW5uZXJUZXh0ID0gJ1RPRE8gTGlzdHMnO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoaDEpO1xuXG4gICAgLy9idXR0b25cbiAgICBjb25zdCBjcmVhdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgY3JlYXRlci5pbm5lclRleHQgPSAnQ3JlYXRlIE5ldyBQcm9qZWN0JztcbiAgICBjcmVhdGVyLmNsYXNzTGlzdC5hZGQoJ2NyZWF0ZS1idXR0b24nKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNyZWF0ZXIpO1xuICAgIGNyZWF0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgY3JlYXRlTmV3UHJvamVjdCgpO1xuICAgICAgbG9hZEhvbWUoY29udGVudCk7XG4gICAgfSk7XG5cbiAgICAvL3VsXG4gICAgY29uc3QgdUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAncHJvamVjdC1saXN0Jyk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh1TGlzdCk7XG5cbiAgICAvL2xpIGVsZW1lbnRzXG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBnZXRQcm9qZWN0TGlzdCgpO1xuICAgIC8vY29uc29sZS5sb2cocHJvamVjdExpc3QpO1xuICAgIHByb2plY3RMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICAvL2NvbnNvbGUubG9nKHApO1xuICAgICAgLy9saSBlbGVtZW50XG4gICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuXG4gICAgICAvL3RpdGxlXG4gICAgICBjb25zdCBwVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHBUaXRsZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LXRpdGxlJyk7XG4gICAgICBwVGl0bGUuaW5uZXJUZXh0ID0gcC5uYW1lO1xuICAgICAgaXRlbS5hcHBlbmQocFRpdGxlKTtcblxuICAgICAgLy90YXNrIGNvdW50XG4gICAgICBjb25zdCBwVGFza3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgcFRhc2tzLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtY291bnRlcicpO1xuICAgICAgcFRhc2tzLmlubmVyVGV4dCA9IGAke3AudGFza0xpc3QubGVuZ3RofSB0b2Rvc2A7XG4gICAgICBpdGVtLmFwcGVuZChwVGFza3MpO1xuXG4gICAgICAvL3ZpZXdcbiAgICAgIGNvbnN0IHBWaWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcbiAgICAgIHBWaWV3LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtdmlldycpO1xuICAgICAgcFZpZXcuaW5uZXJUZXh0ID0gJ1ZpZXcnO1xuICAgICAgaXRlbS5hcHBlbmQocFZpZXcpO1xuICAgICAgcFZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBsb2FkUHJvamVjdChjb250ZW50LCBwKTtcbiAgICAgIH0pO1xuXG4gICAgICAvL2RlbGV0ZSBcbiAgICAgIGNvbnN0IHBEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgICAgcERlbGV0ZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWRlbGV0ZScpO1xuICAgICAgcERlbGV0ZS5pbm5lclRleHQgPSAnRGVsZXRlJztcbiAgICAgIGl0ZW0uYXBwZW5kKHBEZWxldGUpO1xuICAgICAgcERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIGRlbGV0ZVByb2plY3QocCk7XG4gICAgICAgIGxvYWRIb21lKGNvbnRlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vYXBwZW5kIHRvIGxpc3RcbiAgICAgIHVMaXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgIH0pO1xuXG4gICAgLy9hcHBlbmQgbGlzdCB0byBjb250ZW50XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh1TGlzdCk7XG5cbiAgICAvL2EgcmVzZXQgYnV0dG9uXG4gICAgY29uc3QgcmVzZXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgcmVzZXRlci5jbGFzc0xpc3QuYWRkKCdob21lLXJlc2V0Jyk7XG4gICAgcmVzZXRlci5pbm5lclRleHQgPSAnUmVzZXQgYWxsJztcbiAgICBjb250ZW50LmFwcGVuZChyZXNldGVyKTtcbiAgICByZXNldGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgIHJlc2V0U3RvcmFnZSgpO1xuICAgICAgY3JlYXRlTmV3UHJvamVjdCgpO1xuICAgICAgbG9hZEhvbWUoY29udGVudCk7XG4gICAgfSlcbn1cblxuZXhwb3J0IHtsb2FkSG9tZX07IiwiaW1wb3J0IHtsb2FkSG9tZX0gZnJvbSBcIi4vaG9tZVBhZ2VNb2R1bGUuanNcIjtcbmltcG9ydCB7cHJvamVjdEZhY3Rvcnl9IGZyb20gXCIuL3Byb2plY3RPYmpNb2R1bGUuanNcIjtcbmltcG9ydCB7bG9hZFByb2plY3R9IGZyb20gXCIuL3Byb2plY3RQYWdlTW9kdWxlLmpzXCI7XG5pbXBvcnQge3Rhc2tGYWN0b3J5fSBmcm9tIFwiLi90YXNrT2JqTW9kdWxlXCI7XG5pbXBvcnQge2xvYWRQcm9qZWN0TGlzdCwgc3RvcmVQcm9qZWN0TGlzdCwgcmVzZXRTdG9yYWdlfSBmcm9tIFwiLi9zdG9yYWdlTW9kdWxlXCJcblxuLy90ZXN0IHRoYXQgd2VicGFjayB3b3Jrc1xuY29uc29sZS5sb2coJ3dlYnBhY2sgY29tcGlsZWQgdG8gbWFpbi5qcycpO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcblxuLy9yZXNldFN0b3JhZ2UoKTsgLy90b2RvOiByZW1vdmUgdGhpcyByZXNldFxubG9hZFByb2plY3RMaXN0KCk7XG5cbmxvYWRIb21lKGNvbnRlbnQpO1xuY29uc29sZS5sb2coJ2VuZCBvZiBpbmRleCcpO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9